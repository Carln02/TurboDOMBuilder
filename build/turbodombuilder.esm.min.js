function t(t){return t instanceof Element?t:"element"in t?t.element:void 0}function e(e,s){if(!e||!s)return e;let i=t(e);try{Array.isArray(s)?s.forEach((e=>i.removeChild(t(e)))):i.removeChild(t(s))}catch(t){console.error(t)}return e}function s(t,e=document.head){if(!t)return;const s=document.createElement("style");s.innerHTML=t,e.appendChild(s)}function i(e,s){if(!e||!s)return e;let i=t(e);try{"string"==typeof s&&(s=s.split(" ")),s.filter((t=>t.trim().length>0)).forEach((t=>i.classList.add(t)))}catch(t){console.error(t)}return e}function n(e,s,i,n){if(!e)return e;return t(e).addEventListener(s,(t=>{"function"==typeof i?i(t,e):"object"==typeof i&&i.handleEvent&&i.handleEvent(t)}),n),e}function r(e,s){if(!e||!s)return e;let i=t(e);try{Array.isArray(s)?s.forEach((e=>i.appendChild(t(e)))):i.appendChild(t(s))}catch(t){console.error(t)}return e}function o(e,o={}){let l=t(e);return Object.keys(o).forEach((t=>{switch(t){case"tag":return;case"text":if(!(l instanceof HTMLElement))return;return void(l.innerText=o.text);case"style":if(!(l instanceof HTMLElement||l instanceof SVGElement))return;return void(l.style.cssText+=o.style);case"stylesheet":return void s(o.stylesheet,"root"in e?e.root:document.head);case"classes":return void i(l,o.classes);case"listeners":return void Object.keys(o.listeners).forEach((t=>n(l,t,o.listeners[t])));case"children":return void r(l,o.children);case"parent":return void r(o.parent,l);default:return void l.setAttribute(t,o[t])}})),e}function l(e,s){if(!e||!s)return e;let i=t(e);try{"string"==typeof s&&(s=s.split(" ")),s.filter((t=>t.trim().length>0)).forEach((t=>i.classList.remove(t)))}catch(t){console.error(t)}return e}function h(e,s,i){if(!e||!s)return e;let n=t(e);try{"string"==typeof s&&(s=s.split(" ")),s.filter((t=>t.trim().length>0)).forEach((t=>{null!=i?n.classList.toggle(t,i):n.classList.toggle(t)}))}catch(t){console.error(t)}return e}function u(e,s,i){if(!e||!s)return e;if(!i)return r(e,s);let n=t(e),o=t(i);try{Array.isArray(s)?s.forEach((e=>n.insertBefore(t(e),o))):n.insertBefore(t(s),o)}catch(t){console.error(t)}return e}function a(e){if(!e)return e;try{Array.from(t(e).children).forEach((t=>t.remove()))}catch(t){console.error(t)}return e}function c(t={}){let e=document.createElement(t.tag||"div");return o(e,t),e}function d(t,e=document.head){if(!t)return;const s=c({tag:"link",rel:"stylesheet",href:t,type:"text/css"});e.appendChild(s)}class p{addedStylesheets=new Map;getStylesheets(t){let e=this.addedStylesheets.get(t);return e||(this.addedStylesheets.set(t,new Set),e=this.addedStylesheets.get(t)),e}addStylesheet(t,e,i=document.head){if(!t||0==t.length)return;let n=this.getStylesheets(i);n.has(e)||(s(t),n.add(e))}addStylesheetFile(t,e,s=document.head){if(!t||0==t.length)return;let i=this.getStylesheets(s);i.has(e)||(d(t),i.add(e))}}function m(t){for(;t;){if(t.shadowRoot)return t.shadowRoot;t=t.parentElement}return document.head}class y extends HTMLElement{root=document.head;static stylesheet="";static stylesRecord=new p;pendingStyles={};constructor(t={}){super(),t.shadowDOM&&(this.root=this.attachShadow({mode:"open"})),y.stylesRecord.addStylesheet(this.constructor.stylesheet,this.className,m(this)),y.stylesRecord.addStylesheetFile(this.constructor.stylesheetFile,this.className,m(this)),this.setProperties(t)}static config={};static configure(t){Object.entries(t).forEach((([t,e])=>{void 0!==e&&(this.config[t]=e)}))}setProperties(t){return o(this,t),this}addClass(t){return i(this,t),this}removeClass(t){return l(this,t),this}toggleClass(t,e){return h(this,t,e),this}addChild(t){return r(this,t),this}remChild(t){return e(this,t),this}addChildBefore(t,e){return u(this,t,e),this}removeAllChildren(){return a(this),this}addListener(t,e,s){return n(this,t,e,s),this}setStyle(t,e){return this.pendingStyles[t]=e,this.applyStyles(),this}setStyles(t){return this.pendingStyles.cssText=t,this.applyStyles(),this}applyStyles(){requestAnimationFrame((()=>{for(const t in this.pendingStyles)"cssText"==t?this.style.cssText+=";"+this.pendingStyles.cssText:this.style[t]=this.pendingStyles[t];this.pendingStyles={}}))}execute(t){return t(this),this}removeListener(t,e,s){return this.removeEventListener(t,e,s),this}setAttribute(t,e){return super.setAttribute(t,e?.toString()||"true"),this}removeAttribute(t){return super.removeAttribute(t),this}blur(){return super.blur(),this}focus(){return super.focus(),this}remove(){return super.remove(),this}show(t){return this.setStyle("display",t?"":"none"),this}}function g(t,e){fetch(t).then((t=>{if(!t.ok)throw new Error("Network response was not ok while loading your SVG");return t.text()})).then((t=>{let s=function(t){let e=c();return e.innerHTML=t,e.children[0]}(t);s&&e&&e(s)})).catch((t=>console.error("Error fetching SVG:",t)))}class f{cache={};fetchSvg(t,e){let s=this.cache[t];s?e(s.cloneNode(!0)):g(t,(s=>{this.cache[t]=s.cloneNode(!0),e(s)}))}}function x(t){if(!t)return"";const e=t.match(/\.\S{1,4}$/);return e?e[0]:""}function C(t={}){return t.tag="img",c(t)}class v extends y{_element=null;_type;_directory;_icon;_iconColor=null;_onLoaded=null;static config={type:"svg",path:""};static cache=new f;constructor(t){super(t),this.update(t)}update(t){t.unsetDefaultClasses?this.removeClass(v.config.defaultClasses):this.addClass(v.config.defaultClasses),this.type=t.type,this.directory=t.directory,t.iconColor&&(this.iconColor=t.iconColor),t.onLoaded&&(this._onLoaded=t.onLoaded),this.icon=t.icon}generateSvg(){this.clear(),v.cache.fetchSvg(this.path,(t=>{this.element||(this.element=t,this.addChild(this.element),this.element&&(this.iconColor&&(this.element.style.fill=this.iconColor),this._onLoaded&&this._onLoaded(this.element)))}))}generateImg(){if(this.element instanceof HTMLImageElement)return this.element.src=this.path,void(this.element.alt=this.icon);this.clear(),this.element=C({src:this.path,alt:this.icon,parent:this})}clear(){this.removeAllChildren(),this.element=null}get type(){return this._type}set type(t){t&&0!=t.length||(t=this.type||v.config.type||"svg"),this._type=t}get directory(){return this._directory}set directory(t){t||(t=this.directory||v.config.path||""),t.length>0&&!t.endsWith("/")&&(t+="/"),this._directory=t}get path(){let t=this.icon.endsWith("."+this.type)||0==this.type.length?"":"."+this.type;return this.directory+this.icon+t}get icon(){return this._icon}set icon(t){this.type=x(t).substring(1),this._icon=t,"svg"==this.type?this.generateSvg():this.generateImg()}get iconColor(){return this._iconColor}set iconColor(t){this._iconColor=t,this.element instanceof SVGElement&&t&&(this.element.style.fill=t)}set element(t){this._element=t}get element(){return this._element}}function E(t){return new v(t)}function w(t,e){void 0===e&&(e={});var s=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===s&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}customElements.define("turbo-icon",v);w("turbo-button{align-items:center;background-color:#dadada;border:1px solid #000;border-radius:.4em;color:#000;display:inline-flex;flex-direction:row;gap:.4em;padding:.5em .7em;text-decoration:none}turbo-button>h4{flex-grow:1}");class S extends y{_elements;_buttonTextTag;static config={defaultTextTag:"h4"};constructor(t){super(t),this.elements={leftCustomElements:null,leftIcon:null,buttonText:null,rightIcon:null,rightCustomElements:null},this.buttonTextTag=t.customTextTag,t.unsetDefaultClasses||this.addClass(S.config.defaultClasses),t.leftCustomElements&&(this.leftCustomElements=t.leftCustomElements),t.leftIcon&&(this.leftIcon=t.leftIcon),t.buttonText&&(this.buttonText=t.buttonText),t.rightIcon&&(this.rightIcon=t.rightIcon),t.rightCustomElements&&(this.rightCustomElements=t.rightCustomElements)}addAtPosition(t,e){if(!t)return;let s=0;for(let t in this.elements){if(t==e)break;this.elements[t]&&s++}this.addChildBefore(t,this.children[s])}removeElement(t){t&&(Array.isArray(t)?t.forEach((t=>this.remChild(t))):this.remChild(t))}get elements(){return this._elements}set elements(t){this._elements=t}get buttonTextTag(){return this._buttonTextTag}set buttonTextTag(t){t||(t=S.config.defaultTextTag||"h4"),this._buttonTextTag=t}get leftCustomElements(){return this.elements.leftCustomElements}set leftCustomElements(t){this.addAtPosition(t,"leftCustomElements"),this.removeElement(this.leftCustomElements),this.elements.leftCustomElements=t}get leftIcon(){return this.elements.leftIcon}set leftIcon(t){"string"==typeof t&&(t=new v({icon:t})),this.addAtPosition(t,"leftIcon"),this.removeElement(this.leftIcon),this.elements.leftIcon=t}get buttonText(){return this.elements.buttonText}set buttonText(t){if("string"==typeof t){if(this.buttonText&&"innerText"in this.buttonText)return void(this.buttonText.innerText=t);t=c({tag:this.buttonTextTag,text:t})}this.addAtPosition(t,"buttonText"),this.removeElement(this.buttonText),this.elements.buttonText=t}get rightIcon(){return this.elements.rightIcon}set rightIcon(t){"string"==typeof t&&(t=new v({icon:t})),this.addAtPosition(t,"rightIcon"),this.removeElement(this.rightIcon),this.elements.rightIcon=t}get rightCustomElements(){return this.elements.rightCustomElements}set rightCustomElements(t){this.addAtPosition(t,"rightCustomElements"),this.removeElement(this.rightCustomElements),this.elements.rightCustomElements=t}}function b(t){return new S(t)}customElements.define("turbo-button",S);class T extends y{_value;_selected=!1;_selectedClass="";constructor(t){super(t),this.value=t.value,t.selectedClass&&(this.selectedClass=t.selectedClass),t.selected&&(this.selected=t.selected)}toggle(){this.selected=!this.selected}get value(){return this._value}set value(t){this._value=t,this.innerText=t}get selected(){return this._selected}set selected(t){this._selected=t,this.toggleClass(this.selectedClass,t)}get selectedClass(){return this._selectedClass}set selectedClass(t){this._selectedClass=t}}function P(t){return new T(t)}function F(t={}){return t.tag="input",c(t)}customElements.define("turbo-dropdown-entry",T);w("turbo-dropdown{display:inline-block;position:relative}turbo-dropdown>:nth-child(2){background-color:#fff;border:.1em solid #5e5e5e;border-radius:.4em;display:flex;flex-direction:column;left:0;overflow:hidden;top:calc(100% + .4em);z-index:1}turbo-dropdown-entry{padding:.5em .7em;width:100%}turbo-dropdown-entry:hover{background-color:#d7d7d7}turbo-dropdown-entry:not(:last-child){border-bottom:.1em solid #bdbdbd}");w("turbo-popup{position:fixed}");class I extends y{viewportMargin=0;offsetFromParent=0;constructor(t={}){super(t),this.addListeners(),this.show(!1)}addListeners(){document.addEventListener("scroll",(()=>this.show(!1))),document.addEventListener("click",(t=>{this.isShown&&!this.contains(t.target)&&this.show(!1)}))}recomputePosition(){const t=this.getBoundingClientRect(),e=this.parentElement.getBoundingClientRect(),s=window.getComputedStyle(this),i=window.getComputedStyle(this.parentElement),n=this.recomputeTop(t,e),r=this.recomputeLeft(t,e);this.recomputeMaxHeight(n,s,i),this.recomputeMaxWidth(r,s,i)}recomputeTop(t,e){let s;const i=t.height+this.offsetFromParent+this.viewportMargin;return s=window.innerHeight-e.bottom>=i?e.bottom:e.top>=i?e.top-t.height:e.bottom,this.setStyle("top",s+"px"),s}recomputeLeft(t,e){let s=e.left+e.width/2-t.width/2;return s<this.viewportMargin?s=0:s+t.width>window.innerWidth-this.viewportMargin&&(s=window.innerWidth-t.width),this.setStyle("left",s+"px"),s}recomputeMaxHeight(t,e,s){const i=window.innerHeight-t-this.viewportMargin-parseFloat(e.marginBottom)-parseFloat(e.marginTop)-parseFloat(s.marginBottom)-parseFloat(s.marginTop);e.maxHeight&&parseFloat(e.maxHeight)<=i||this.setStyle("maxHeight",i+"px")}recomputeMaxWidth(t,e,s){const i=window.innerWidth-t-this.viewportMargin-parseFloat(e.marginLeft)-parseFloat(e.marginRight)-parseFloat(s.marginLeft)-parseFloat(s.marginRight);e.maxWidth&&parseFloat(e.maxWidth)<=i||this.setStyle("maxWidth",i+"px")}clearMaxDimensions(){this.setStyle("maxHeight",""),this.setStyle("maxWidth","")}get isShown(){return"none"!=this.style.display}show(t){return this.isShown==t||(this.setStyle("display",t?"":"none"),t?requestAnimationFrame((()=>this.recomputePosition())):this.clearMaxDimensions()),this}toggle(){return this.show(!this.isShown)}}function L(t={}){return new I(t)}customElements.define("turbo-popup",I);class _ extends y{selector;popup;_entries=[];underlyingInput;popupOpen=!1;multiSelection=!1;static config={defaultEntryTag:"h4",defaultSelectorTag:"h4"};constructor(t){super(t),t.selectedValues||(t.selectedValues=[]),t.multiSelection&&(this.multiSelection=t.multiSelection),t.underlyingInputName&&(this.underlyingInput=F({type:"hidden",name:t.underlyingInputName})),this.selector=this.createSelector(t),this.popup=this.createPopup(t),this.entries=t.values.map((e=>this.createDropdownEntry(e,t))),this.entries.forEach((e=>{t.selectedValues?.includes(e.value)&&this.select(e)})),document.addEventListener("click",(t=>{this.popupOpen&&!this.contains(t.target)&&this.openPopup(!1)}))}createSelector(t){let e;if(t.selector instanceof HTMLElement)e=t.selector;else{let s=t.customSelectorTag?t.customSelectorTag:_.config.defaultSelectorTag;e=b({buttonText:"string"==typeof t.selector?t.selector:"string"==typeof t.values[0]?t.values[0]:t.values[0].value,customTextTag:s})}let s=t.customSelectorClasses?t.customSelectorClasses:_.config.defaultSelectorClasses;return e.addEventListener("click",(()=>this.openPopup(!this.popupOpen))),this.addChild(e),i(e,s),e}createPopup(t){let e=t.popup?t.popup:L(),s=t.customPopupClasses?t.customPopupClasses:_.config.defaultPopupClasses;return this.addChild(e),e.style.display="none",i(e,s),e}createDropdownEntry(t,e){return"string"==typeof t&&(t=P({value:t,tag:e.customEntryTag?e.customEntryTag:_.config.defaultEntryTag})),t.addClass(e.customEntriesClasses?e.customEntriesClasses:_.config.defaultEntriesClasses),t.selectedClass+=" "+(e.customSelectedEntriesClasses?e.customSelectedEntriesClasses:_.config.defaultSelectedEntriesClasses),t.addEventListener("click",(()=>{this.select(t),this.openPopup(!1)})),r(this.popup,t),t}select(t){if("string"==typeof t){let e=this.entries.find((e=>e.value==t));if(!e)return this;t=e}return this.multiSelection||this.selectedEntries.forEach((t=>t.toggle())),t.toggle(),this.updateSelectorText(),this.dispatchEvent(new CustomEvent("change",{detail:{selectedValues:this.selectedValues}})),this}reset(){this.entries[0].click()}get entries(){return this._entries}set entries(t){this._entries=t}get selectedEntries(){return this.entries.filter((t=>t.selected))}get selectedValues(){return this.selectedEntries.map((t=>t.value))}get values(){return this.entries.map((t=>t.value))}set values(t){for(let e=0;e<Math.min(this.entries.length,t.length);e++)this.entries[e].value=t[e];this.updateSelectorText()}updateSelectorText(){let t=this.selectedValues.join(", ");this.underlyingInput&&(this.underlyingInput.value=t),this.selector instanceof S&&(this.selector.buttonText=t)}openPopup(t){this.popupOpen!=t&&(this.popupOpen=t,this.popup instanceof y?this.popup.show(t):this.popup.style.display=t?"":"none")}}function A(t){return new _(t)}customElements.define("turbo-dropdown",_);class M{static shadowDOM=!1}class O{element;useProxy=!0;root=document.head;constructor(t={}){return t instanceof HTMLElement?this.element=t:(this.element=document.createElement(t.tag||"div"),t.shadowDOM&&(this.root=this.element.attachShadow({mode:"open"})),this.setProperties(t)),this.useProxy?this.proxy():this}proxy(){return new Proxy(this,{get:(t,e,s)=>{if(e in t){const s=t[e];return"function"==typeof s?s.bind(t):s}const i=t.element[e];return void 0!==i?"function"==typeof i?i.bind(t.element):i:Reflect.get(t.element,e,s)},set:(t,e,s)=>e in t?(t[e]=s,!0):(t.element[e]=s,!0)})}setProperties(t){return o(this,t),this.useProxy?this.proxy():this}addClass(t){return i(this.element,t),this.useProxy?this.proxy():this}removeClass(t){return l(this.element,t),this.useProxy?this.proxy():this}toggleClass(t,e){return h(this.element,t,e),this.useProxy?this.proxy():this}addChild(t){return r(this.element,t),this.useProxy?this.proxy():this}remChild(t){return e(this.element,t),this.useProxy?this.proxy():this}addChildBefore(t,e){return u(this.element,t,e),this.useProxy?this.proxy():this}removeAllChildren(){return a(this.element),this.useProxy?this.proxy():this}setStyle(t,e){return this.element.style[t]=e,this.useProxy?this.proxy():this}setStyles(t){return this.element.style.cssText+=t,this.useProxy?this.proxy():this}addListener(t,e,s){return n(this.element,t,e,s),this.useProxy?this.proxy():this}removeListener(t,e,s){return this.element.removeEventListener(t,e,s),this.useProxy?this.proxy():this}execute(t){return t(this.proxy()),this.useProxy?this.proxy():this}setAttribute(t,e){return null==e&&(e=!0),this.element.setAttribute(t,e.toString()),this.useProxy?this.proxy():this}removeAttribute(t){return this.element.removeAttribute(t),this.useProxy?this.proxy():this}blur(){return this.element.blur(),this.useProxy?this.proxy():this}focus(){return this.element.focus(),this.useProxy?this.proxy():this}remove(){return this.element.remove(),this.useProxy?this.proxy():this}show(t){return this.setStyle("display",t?"":"none"),this.useProxy?this.proxy():this}}class H{transitionProperties=[];constructor(t){t.property||(t.property="all");for(let e=0;e<2;e++){let s=0===e?"In":"Out";this.transitionProperties.push({property:t.property,duration:t["duration"+s]?t["duration"+s]:t.duration?t.duration:0,delay:t["delay"+s]?t["delay"+s]:t.delay?t.delay:0,timingFunction:t["timingFunction"+s]?t["timingFunction"+s]:t.timingFunction?t.timingFunction:"linear"})}}transition(t,e,s=!1){let i=s?1:0,n=s?"Out":"In";(t instanceof y||t instanceof HTMLElement?[t]:t).forEach((t=>{t.style.transitionProperty=e.property?e.property:this.transitionProperties[i].property,t.style.transitionDuration=(e["duration"+n]?e["duration"+n]:e.duration?e.duration:this.transitionProperties[i].duration)+"s",t.style.transitionDelay=(e["delay"+n]?e["delay"+n]:e.delay?e.delay:this.transitionProperties[i].delay)+"s",t.style.transitionTimingFunction=e["timingFunction"+n]?e["timingFunction"+n]:e.timingFunction?e.timingFunction:this.transitionProperties[i].timingFunction}))}transitionIn(t,e){this.transition(t,e,!1)}transitionOut(t,e){this.transition(t,e,!0)}update(t){t.property&&(this.transitionProperties[0].property=t.property,this.transitionProperties[1].property=t.property),t.durationIn?this.transitionProperties[0].duration=t.durationIn:t.duration&&(this.transitionProperties[0].duration=t.duration),t.durationOut?this.transitionProperties[1].duration=t.durationOut:t.duration&&(this.transitionProperties[1].duration=t.duration),t.delayIn?this.transitionProperties[0].delay=t.delayIn:t.delay&&(this.transitionProperties[0].delay=t.delay),t.delayOut?this.transitionProperties[1].delay=t.delayOut:t.delay&&(this.transitionProperties[1].delay=t.delay),t.timingFunctionIn?this.transitionProperties[0].timingFunction=t.timingFunctionIn:t.timingFunction&&(this.transitionProperties[0].timingFunction=t.timingFunction),t.timingFunctionOut?this.transitionProperties[1].timingFunction=t.timingFunctionOut:t.timingFunction&&(this.transitionProperties[1].timingFunction=t.timingFunction)}}function k(t={}){return t.tag="canvas",c(t)}function D(t={}){return t.tag="div",c(t)}function B(t={}){return t.tag="form",c(t)}function V(t={}){return t.tag="h1",c(t)}function W(t={}){return t.tag="h2",c(t)}function R(t={}){return t.tag="h3",c(t)}function N(t={}){return t.tag="h4",c(t)}function j(t={}){return t.tag="h5",c(t)}function G(t={}){return t.tag="h6",c(t)}function q(t={}){return t.tag="p",c(t)}function z(t={}){return t.tag="textarea",c(t)}function $(t){let e=c(t);return e.style.display="flex",e.style.flexDirection="column",e}function J(t){let e=$(t);return e.style.justifyContent="center",e.style.alignItems="center",e}function K(t){let e=c(t);return e.style.display="flex",e.style.flexDirection="row",e}function Q(t){let e=K(t);return e.style.justifyContent="center",e.style.alignItems="center",e}function U(t){let e=c(t);return e.style.flexGrow="1",e}function X(t,...e){let s="";return t.forEach(((t,i)=>{s+=t+(e[i]||"")})),s}export{_ as Dropdown,T as DropdownEntry,p as StylesRecord,f as SvgCache,H as Transition,S as TurboButton,M as TurboConfig,y as TurboElement,v as TurboIcon,I as TurboPopup,O as TurboWrapper,r as addChild,u as addChildBefore,i as addClass,n as addListener,s as addStylesheet,d as addStylesheetFile,b as button,k as canvas,X as css,D as div,A as dropdown,P as dropdownEntry,c as element,g as fetchSvg,$ as flexCol,J as flexColCenter,K as flexRow,Q as flexRowCenter,B as form,m as getClosestRoot,t as getElement,x as getFileExtension,V as h1,W as h2,R as h3,N as h4,j as h5,G as h6,E as icon,C as img,F as input,q as p,L as popup,a as removeAllChildren,e as removeChild,l as removeClass,o as setProperties,U as spacer,z as textArea,h as toggleClass};
