function t(t){return function(e,n,i){const s=i?.get,r=i?.set;if(!r&&!t?.callBefore)return i;const o=Symbol(`__${String(n)}__`),l=function(){if(s){const e=s.call(this);if(t?.returnDefinedGetterValue)return e}return this[o]},a=function(e){0!=t?.cancelIfUnchanged&&e==this[o]||(t?.callBefore&&(e=function(){return t.callBefore.call(this,e)}.call(this)),this[o]=e,r&&r.call(this,e))};return i?(!t?.returnDefinedGetterValue&&s||(i.get=l),i.set=a):Object.defineProperty(e,n,{get:l,set:a,enumerable:!0,configurable:!0}),i}}function e(t,e,n=Object.getOwnPropertyDescriptor(t,e)){const i=n?.value;if(!i)throw new Error(`No method ${e} found on target`);const s=Symbol(`__callOnce__${e}`);return n.value=function(...t){if(!this[s])return this[s]=!0,i.apply(this,t);console.warn(`Function ${e} has already been called once on this instance and will not be called again.`)},n}function n(t,e=Symbol(`__callOncePerInstance__${t.name}`)){return function(...n){if(!this[e])return this[e]=!0,t.apply(this,n)}}function i(t={}){return function(e,i,o=Object.getOwnPropertyDescriptor(e,i)){const l=o?.value||o?.get;if(!l)throw new Error(`No method ${i} found on target`);const a=!!o.get,h=Symbol(`__cache__${i}`),c=Symbol(`__cache__setup__${i}`),u=[],d=function(t=!0){s.call(this,a,h,u,t)},p=n((function(n){!function(t,e,n,i,s){if(n.onEvent){const e="function"==typeof i.addEventListener?i:document;(Array.isArray(n.onEvent)?n.onEvent:n.onEvent.split(" ")).forEach((n=>e.addEventListener(n,(()=>s.call(t)))))}if(n.onFieldChange){(Array.isArray(n.onFieldChange)?n.onFieldChange:[n.onFieldChange]).forEach((n=>{"string"==typeof n?n.split(" ").forEach((n=>r(t,n,e,s))):r(t,n.name,e,s)}))}if(n.onCallback){const e=setInterval((()=>{const e=n.onCallback.call(t);e instanceof Promise?e.then((e=>s.call(t,e))):s.call(t,e)}),n.onCallbackFrequency||50);"function"==typeof i.addEventListener&&i.addEventListener("destroy",(()=>clearInterval(e)))}}(n,i,t,e,d)}),c);a?o.get=function(){return this[h]||(p.call(this,this),this[h]=l.apply(this),t.timeout&&u.push(setTimeout((()=>d.call(this)),t.timeout)),t.clearOnNextFrame&&requestAnimationFrame((()=>d.call(this)))),this[h]}:o.value=function(...e){this[h]||(this[h]=new Map,p.call(this,this));const n=0==e.length?"__no_args__":JSON.stringify(e.map((t=>"function"==typeof t?`function:${t.name}`:"object"==typeof t&&null!=t?JSON.stringify(Object.entries(t).sort()):null==t?"undefined":t)));if(this[h].has(n))return this[h].get(n);{const i=l.apply(this,e);return this[h].set(n,i),t.timeout&&u.push(setTimeout((()=>this[h].delete(n)),t.timeout)),t.clearOnNextFrame&&requestAnimationFrame((()=>d.call(this))),i}}}}function s(t,e,n,i){i&&(t?delete this[e]:this[e]?.clear(),n.forEach((t=>clearTimeout(t))),n.splice(0,n.length))}function r(t,e,n,i){const s=t[e];if(null!=s)if(console.log(s),"function"==typeof s)t[e]=function(...e){return i.call(t),s.apply(t,e)};else{const n=Object.getOwnPropertyDescriptor(t,e);console.log(n),Object.defineProperty(t,e,{get:()=>n?.get?.call(t)||t[s],set(e){i.call(t),n?.set?n.set.call(t,e):t[s]=e},configurable:!0,enumerable:!0})}else console.warn(`No method ${n} found on target. It will be ignored.`)}function o(t){for(const e of Object.getOwnPropertySymbols(t))e.toString().startsWith("Symbol(__cache__)")&&delete t[e]}function l(t,e){const n="function"==typeof e?e.name:e,i=Object.getOwnPropertySymbols(t).find((t=>t.toString()===`Symbol(__cache__${n})`));i&&t[i]&&delete t[i]}const a=t=>e=>customElements.define(t,e);function h(t){if(null==t)return"";switch(typeof t){case"string":return t;case"number":case"boolean":case"bigint":case"symbol":case"function":return t.toString();case"object":if(Array.isArray(t))return JSON.stringify(t);if(t instanceof Date)return t.toISOString();try{return JSON.stringify(t)}catch{return"[object Object]"}default:return String(t)}}function c(t){switch(t){case"":return;case"null":return null;case"true":return!0;case"false":return!1}if(!isNaN(Number(t)))return Number(t);if(/^\d+n$/.test(t))return BigInt(t.slice(0,-1));if(t.startsWith("function")||t.startsWith("("))try{const e=new Function(`return (${t})`)();if("function"==typeof e)return e}catch{}try{const e=JSON.parse(t);if("object"==typeof e&&null!=e)return e}catch{}return t}function u(t){if(!t||0==t.length)return"";const e=t.match(/\.\S{1,4}$/);return e?e[0]:""}function d(t){if(t&&0!=t.length)return t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function p(t){if(t&&0!=t.length)return t.replace(/-([a-z])/g,(t=>t[1].toUpperCase()))}function m(t,e){let n=t.constructor;n.observedAttributes||(n.observedAttributes=[]);const i=d(e),s=Symbol(`__observed__${e}`);n.observedAttributes.push(i);let r=function(t,e){for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Object.getPrototypeOf(t)}}(n.prototype,e)||{enumerable:!0,configurable:!0};Object.defineProperty(n.prototype,e,{get:r.get||function(){return this[s]},set:function(t){this[e]!==t&&(r.set?r.set.call(this,t):this[s]=t,"function"==typeof this.setAttribute&&this.setAttribute(i,h(this[s])))},enumerable:r.enumerable,configurable:r.configurable})}const f="http://www.w3.org/2000/svg",g="http://www.w3.org/1998/Math/MathML",y={a:SVGAElement,animate:SVGAnimateElement,animateMotion:SVGAnimateMotionElement,animateTransform:SVGAnimateTransformElement,circle:SVGCircleElement,clipPath:SVGClipPathElement,defs:SVGDefsElement,desc:SVGDescElement,ellipse:SVGEllipseElement,feBlend:SVGFEBlendElement,feColorMatrix:SVGFEColorMatrixElement,feComponentTransfer:SVGFEComponentTransferElement,feComposite:SVGFECompositeElement,feConvolveMatrix:SVGFEConvolveMatrixElement,feDiffuseLighting:SVGFEDiffuseLightingElement,feDisplacementMap:SVGFEDisplacementMapElement,feDistantLight:SVGFEDistantLightElement,feDropShadow:SVGFEDropShadowElement,feFlood:SVGFEFloodElement,feFuncA:SVGFEFuncAElement,feFuncB:SVGFEFuncBElement,feFuncG:SVGFEFuncGElement,feFuncR:SVGFEFuncRElement,feGaussianBlur:SVGFEGaussianBlurElement,feImage:SVGFEImageElement,feMerge:SVGFEMergeElement,feMergeNode:SVGFEMergeNodeElement,feMorphology:SVGFEMorphologyElement,feOffset:SVGFEOffsetElement,fePointLight:SVGFEPointLightElement,feSpecularLighting:SVGFESpecularLightingElement,feSpotLight:SVGFESpotLightElement,feTile:SVGFETileElement,feTurbulence:SVGFETurbulenceElement,filter:SVGFilterElement,foreignObject:SVGForeignObjectElement,g:SVGGElement,image:SVGImageElement,line:SVGLineElement,linearGradient:SVGLinearGradientElement,marker:SVGMarkerElement,mask:SVGMaskElement,metadata:SVGMetadataElement,mpath:SVGMPathElement,path:SVGPathElement,pattern:SVGPatternElement,polygon:SVGPolygonElement,polyline:SVGPolylineElement,radialGradient:SVGRadialGradientElement,rect:SVGRectElement,script:SVGScriptElement,set:SVGSetElement,stop:SVGStopElement,style:SVGStyleElement,svg:SVGSVGElement,switch:SVGSwitchElement,symbol:SVGSymbolElement,text:SVGTextElement,textPath:SVGTextPathElement,title:SVGTitleElement,tspan:SVGTSpanElement,use:SVGUseElement,view:SVGViewElement},E={annotation:MathMLElement,"annotation-xml":MathMLElement,maction:MathMLElement,math:MathMLElement,merror:MathMLElement,mfrac:MathMLElement,mi:MathMLElement,mmultiscripts:MathMLElement,mn:MathMLElement,mo:MathMLElement,mover:MathMLElement,mpadded:MathMLElement,mphantom:MathMLElement,mprescripts:MathMLElement,mroot:MathMLElement,mrow:MathMLElement,ms:MathMLElement,mspace:MathMLElement,msqrt:MathMLElement,mstyle:MathMLElement,msub:MathMLElement,msubsup:MathMLElement,msup:MathMLElement,mtable:MathMLElement,mtd:MathMLElement,mtext:MathMLElement,mtr:MathMLElement,munder:MathMLElement,munderover:MathMLElement,semantics:MathMLElement};function b(t){return Object.keys(y).includes(t)||t?.startsWith("svg")}function v(t){return Object.keys(E).includes(t)||t?.startsWith("math")}function S(t={}){let e;return e=t.namespace?"svg"==t.namespace?document.createElementNS(f,t.tag||"svg"):"mathML"==t.namespace?document.createElementNS(g,t.tag||"math"):document.createElementNS(t.namespace,t.tag||"div"):document.createElement(t.tag||"div"),t.shadowDOM&&e.attachShadow({mode:"open"}),e.setProperties(t),e}function x(t={}){let e;return e=b(t.tag)?document.createElementNS(f,t.tag||"svg"):v(t.tag)?document.createElementNS(g,t.tag||"math"):document.createElement(t.tag||"div"),t.shadowDOM&&e.attachShadow({mode:"open"}),e.setProperties(t),e}function T(t){return(e={})=>(e.tag=t,S({...e,tag:t}))}function w(t={}){return S({...t,tag:"a"})}function M(t={}){return S({...t,tag:"canvas"})}function P(t={}){return S({...t,tag:"div"})}function k(t={}){return S({...t,tag:"form"})}function C(t={}){return S({...t,tag:"h1"})}function L(t={}){return S({...t,tag:"h2"})}function D(t={}){return S({...t,tag:"h3"})}function A(t={}){return S({...t,tag:"h4"})}function O(t={}){return S({...t,tag:"h5"})}function F(t={}){return S({...t,tag:"h6"})}function I(t={}){return S({...t,tag:"img"})}function _(t={}){return S({...t,tag:"input"})}function N(t={}){return S({...t,tag:"link"})}function V(t={}){return S({...t,tag:"p"})}function G(t={}){return S({...t,tag:"span"})}function z(t={}){return S({...t,tag:"style"})}function j(t={}){return S({...t,tag:"textarea"})}function $(t={}){return S({...t,tag:"video"})}function R(t){const e=S(t);return e.setStyles({display:"flex",flexDirection:"column"},!0),e}function B(t){const e=R(t);return e.setStyles({justifyContent:"center",alignItems:"center"},!0),e}function H(t){const e=S(t);return e.setStyles({display:"flex",flexDirection:"row"},!0),e}function W(t){const e=H(t);return e.setStyles({justifyContent:"center",alignItems:"center"},!0),e}function K(t){const e=S(t);return e.setStyle("flexGrow",1,!0),e}function U(t,e=document.head){if(!t)return;const n=z({innerHTML:t});e.addChild(n)}function q(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}var X,Y,J,Z,Q;function tt(t){return null==t&&null!=t}function et(t){return void 0===t}function nt(...t){if(t.length<2)return!0;for(let e=0;e<t.length-1;e++)if(t[e]!=t[e+1])return!1;return!0}function it(t,...e){if(e.length<1)return!0;for(const n of e){let e=!1;for(const i of t)n==i&&(e=!0);if(!e)return!1}return!0}"function"==typeof SuppressedError&&SuppressedError,function(t){t.enabled="enabled",t.disabled="disabled",t.stylesOnly="stylesOnly",t.transitionOnly="transitionOnly"}(X||(X={})),function(t){t.vertical="vertical",t.horizontal="horizontal"}(Y||(Y={})),function(t){t.in="in",t.out="out"}(J||(J={})),function(t){t.public="public",t.protected="protected",t.private="private"}(Z||(Z={})),function(t){t.min="min",t.max="max"}(Q||(Q={}));class st{inTransition;outTransition;attachedElements;beforeComputing;constructor(t={}){this.attachedElements=new Set,this.enabled=!0;for(const t of[J.in,J.out])this[`${t}Transition`]={properties:["all"],duration:0,delay:0,timingFunction:"linear"};this.update(t)}attach(...t){return t.forEach((t=>{this.findData(t)||(this.attachedElements.add({element:t,enabled:X.enabled}),t.transitions.attach(this))})),this}detach(...t){return t.forEach((t=>{const e=this.findData(t);e&&(this.attachedElements.delete(e),t.transitions.detach(this))})),this}initialize(t=J.out,e,n=!1,i=!0,s,r=this.beforeComputing){return this.getEnabledEntriesData(e,n,i,r).forEach((e=>{e.lastState=t,this.resolveAndOverrideStyles(e,{[t]:s}),e.element.setStyles(e.resolvedStyles[t])})),this}apply(t=J.out,e,n=!1,i=!0,s,r=this.beforeComputing){return this.getEnabledEntriesData(e,n,i,r).forEach((e=>{e.lastState=t,this.resolveAndOverrideStyles(e,{[t]:s}),e.element.transitions.reload()})),this}toggle(t,e=!1,n=!0,i,s=this.beforeComputing){return this.getEnabledEntriesData(t,e,n,s).forEach((t=>{t.lastState||(t.lastState=this.stateOf(t.element)||J.out),t.lastState=t.lastState==J.out?J.in:J.out,this.resolveAndOverrideStyles(t,i),t.element.transitions.reload()})),this}getEnabledEntriesData(t,e=!1,n=!0,i=this.beforeComputing){if(this.enabled==X.disabled)return console.warn("The transition you are trying to set on an element is disabled."),[];t?t instanceof HTMLCollection?t=Array.from(t):Array.isArray(t)||(t=[t]):t=[],0==t.length&&(e=!0),t.forEach((t=>this.attach(t))),e&&(t=[],this.attachedElements.forEach((e=>t.push(e.element))));const s=[];return t.forEach((t=>{if(t.transitions.enabled==X.disabled)return void console.warn("The transition handler of the element you are trying to animate is disabled.");const e=this.findData(t);e.enabled!=X.disabled?((n||null==e.elementIndex)&&(e.elementIndex=s.length),s.push(e)):console.warn("The transition you are trying to set on an element is disabled for this particular element.")})),s.forEach((t=>{(n||null==t.totalElementCount)&&(t.totalElementCount=s.length),i&&i(t.elementIndex,t.totalElementCount,t.element)})),s}reload(){return this.attachedElements.forEach((t=>t.element.transitions.reload())),this}reloadFor(t){if(this.enabled==X.disabled||t.transitions.enabled==X.disabled)return this;const e=this.findData(t);if(!e||e.enabled==X.disabled)return this;const n=e.lastState,i=it([X.enabled,X.transitionOnly],this.enabled,t.transitions.enabled,e.enabled)&&(0!=this.duration[n]||0!=this.delay[n]),s=it([X.enabled,X.stylesOnly],this.enabled,t.transitions.enabled,e.enabled);return i&&t.appendStyle("transition",this.getTransitionString(e),", ",!0),s&&t.setStyles(e.resolvedStyles[n],!0),this}set enabled(t){this.reload()}get properties(){return this.inTransition.properties}set properties(t){t&&(t="string"==typeof t?t.split(" "):t,this.inTransition.properties=t,this.outTransition.properties=t)}get duration(){return this.getTransitionField("duration")}set duration(t){this.setTransitionField(t,"duration")}get timingFunction(){return this.getTransitionField("timingFunction")}set timingFunction(t){this.setTransitionField(t,"timingFunction")}get delay(){return this.getTransitionField("delay")}set delay(t){this.setTransitionField(t,"delay")}get defaultStyles(){return this.getTransitionField("defaultStyles")}set defaultStyles(t){this.setTransitionField(t,"defaultStyles")}get inTransitionString(){return this.getTransitionString({...this.attachedElements[0],lastState:J.in})}get outTransitionString(){return this.getTransitionString({...this.attachedElements[0],lastState:J.out})}update(t={}){if(t){t.beforeComputing&&(this.beforeComputing=t.beforeComputing);for(const[e,n]of Object.entries(t))this[e]=n}}enableTransitionFor(t,e){const n=this.findData(t);e=st.parseMode(e),n&&n.enabled!=e&&(n.enabled=e,t.transitions.reload())}getTransitionField(t){return{[J.in]:this.inTransition[t],[J.out]:this.outTransition[t]}}setTransitionField(t,e){if(null==t)return;const n="object"==typeof t&&("in"in t||"out"in t);[J.in,J.out].forEach((i=>this[`${i}Transition`][e]=n?t[i]:t))}findData(t){for(const e of this.attachedElements)if(e.element==t)return e;return null}stateOf(t){if(!t)return;const e=this.findData(t);if(e){if(e.lastState)return e.lastState;e.resolvedStyles||this.resolveAndOverrideStyles(e);for(const t of[J.in,J.out]){if(!e.resolvedStyles[t])continue;let n=!0;for(const[i,s]of Object.entries(e.resolvedStyles[t]))if(e.element.style[i]!=s){n=!1;break}if(n)return e.lastState=t,t}}}clone(){return new st({properties:this.properties,duration:this.duration,timingFunction:this.timingFunction,delay:this.delay,defaultStyles:this.defaultStyles})}getTransitionString(t){const e=this[`${t.lastState}Transition`],n="function"==typeof e.duration?e.duration(t.elementIndex,t.totalElementCount,t.element):e.duration,i="function"==typeof e.delay?e.delay(t.elementIndex,t.totalElementCount,t.element):e.delay;let s="";return this.properties.forEach((t=>s+=`, ${t} ${n}s ${e.timingFunction} ${i}s`)),s.substring(2)}resolveAndOverrideStyles(t,e){if(tt(e))return void(t.resolvedStyles={});const n=this.defaultStyles;e=e||{},t.resolvedStyles||(t.resolvedStyles={}),[J.in,J.out].forEach((i=>{if(tt(e[i]))return void(t.resolvedStyles[i]={});const s=e[i]??n[i];switch(t.resolvedStyles[i]={},typeof s){case"number":return void this.properties.forEach((e=>t.resolvedStyles[i][e]=s));case"string":const e=s.split(";").map((t=>t.split(":").map((t=>t.trim()))));return void(1==e.length&&1==e[0].length?this.properties.forEach((n=>t.resolvedStyles[i][n]=e[0][0])):e.forEach((([e,n])=>{e&&n&&(t.resolvedStyles[i][e]=n)})));case"object":for(const[e,n]of Object.entries(s))e&&null!=n&&(t.resolvedStyles[i][e]="function"==typeof n?n(t.elementIndex,t.totalElementCount):n);return;case"function":const n=s(t.elementIndex,t.totalElementCount,t.element);return void("string"==typeof n||"number"==typeof n?this.properties.forEach((e=>t.resolvedStyles[i][e]=n)):t.resolvedStyles[i]=n)}}))}static parseMode(t){return 1==t?X.enabled:0==t?X.disabled:t}}function rt(t={}){return new st(t)}q([t({callBefore:st.parseMode})],st.prototype,"enabled",null);class ot{attachedElement;transitions;constructor(t){this.attachedElement=t,this.transitions=new Set,this.enabled=!0}attach(...t){return t.forEach((t=>{this.transitions.has(t)||(this.transitions.add(t),t.attach(this.attachedElement))})),this}detach(...t){return t.forEach((t=>{this.transitions.has(t)&&(this.transitions.delete(t),t.detach(this.attachedElement))})),this}initialize(t,e,n,i=!1){return t.initialize(e,this.attachedElement,!1,i,n),this}apply(t,e,n,i=!1){return t.apply(e,this.attachedElement,!1,i,n),this}toggle(t,e,n=!1){return t.toggle(this.attachedElement,!1,n,e),this}clear(){this.attachedElement.style.transition=""}reload(){this.clear(),this.transitions.forEach((t=>t.reloadFor(this.attachedElement)))}set enabled(t){t?this.reload():this.clear()}enableTransition(t,e){t.enableTransitionFor(this.attachedElement,e)}}q([t({callBefore:t=>st.parseMode(t)})],ot.prototype,"enabled",null);class lt extends HTMLElement{constructor(t={}){super(),t.shadowDOM&&this.attachShadow({mode:"open"}),this.setProperties(t,!0)}attributeChangedCallback(t,e,n){n&&n!=e&&(this[p(t)]=c(n))}static config={shadowDOM:!1};static configure(t){Object.entries(t).forEach((([t,e])=>{void 0!==e&&(this.config[t]=e)}))}}function at(){const t=Element.prototype.setAttribute,e=Element.prototype.removeAttribute,n=HTMLElement.prototype.blur,i=HTMLElement.prototype.focus;Node.prototype.execute=function(t){return t(this),this},Element.prototype.setAttribute=function(e,n){return t.call(this,e,n?.toString()||"true"),this},Element.prototype.removeAttribute=function(t){return e.call(this,t),this},HTMLElement.prototype.blur=function(){return n.call(this),this},HTMLElement.prototype.focus=function(){return i.call(this),this}}function ht(){const t=Node.prototype.removeChild,e=Element.prototype.remove,n=Element.prototype.closest;Object.defineProperty(Node.prototype,"childHandler",{get:function(){return this instanceof Element&&this.shadowRoot?this.shadowRoot:this},configurable:!1,enumerable:!0}),Object.defineProperty(Node.prototype,"childNodesArray",{get:function(){return Array.from(this.childHandler.childNodes)},configurable:!1,enumerable:!0}),Object.defineProperty(Node.prototype,"childrenArray",{get:function(){return this.childNodesArray.filter((t=>1===t.nodeType))},configurable:!1,enumerable:!0}),Object.defineProperty(Node.prototype,"siblingNodes",{get:function(){return this.parentNode?.childNodesArray||[]},configurable:!1,enumerable:!0}),Object.defineProperty(Node.prototype,"siblings",{get:function(){return this.parentElement?.childrenArray},configurable:!1,enumerable:!0}),Node.prototype.remove=function(){return this.parentNode?.removeChild(this),this},Element.prototype.remove=function(){return e.call(this),this},Node.prototype.addChild=function(t,e,n=this.childrenArray){if(!this||!t)return this;if(void 0!==e&&(e<0||e>n.length)&&(e=void 0),null!=e)this.addChildBefore(t,n[e]);else try{Array.isArray(t)||(t=[t]),t.forEach((t=>{this.childHandler.appendChild(t),t.__outName&&!this[t.__outName]&&(this[t.__outName]=t)}))}catch(t){console.error(t)}return this},Node.prototype.removeChild=function(e){if(!this||!e)return this;try{Array.isArray(e)?e.forEach((e=>t.call(this.childHandler,e))):t.call(this.childHandler,e)}catch(t){console.error(t)}return this},Node.prototype.addChildBefore=function(t,e){if(!this||!t)return this;if(!e)return this.addChild(t);try{Array.isArray(t)?t.forEach((t=>this.childHandler.insertBefore(t,e))):this.childHandler.insertBefore(t,e)}catch(t){console.error(t)}return this},Node.prototype.removeChildAt=function(t,e=1,n=this.childrenArray){if(!this||void 0===t||t<0)return this;if(t>=n.length)return this;try{for(let i=t+e-1;i>=t;i--)i>=n.length||this.removeChild(n[i])}catch(t){console.error(t)}return this},Node.prototype.removeAllChildren=function(t=this.childrenArray){if(!this)return this;try{for(let e=0;e<t.length;e++)this.removeChild(t[e])}catch(t){console.error(t)}return this},Node.prototype.childAt=function(t,e=this.childrenArray){if(!this||void 0===t)return null;for(t>=e.length&&(t=e.length-1);t<0;)t+=e.length;return e[t]},Node.prototype.indexOfChild=function(t,e=this.childrenArray){return this&&t?(e instanceof Array||(e=Array.from(e)),e.indexOf(t)):-1},Node.prototype.hasChild=function(t){if(!this||!t)return!1;const e=Array.from(this.childNodes);if(t instanceof Node)return e.includes(t);for(const n of t)if(!e.includes(n))return!1;return!0},Element.prototype.closest=function(t){if(!this||!t)return null;if("string"==typeof t)return n.call(this,t);if("function"==typeof t){let e=this;for(;e&&!(e instanceof t);)e=e.parentElement;return e||null}return null},Node.prototype.findInParents=function(t){if(!t)return!1;t instanceof Node&&(t=[t]);let e=this,n=0;for(;e&&n<t.length;)t.includes(e)&&n++,e=e.parentNode;return n===t.length},Node.prototype.findInSubTree=function(t){if(!t)return!1;t instanceof Node&&(t=[t]);let e=0;const n=i=>{t.includes(i)&&e++,e>=t.length||i.childNodes.forEach((t=>n(t)))};return n(this),e>=t.length},Node.prototype.indexInParent=function(t=this.siblings){return t?t.indexOf(this):-1}}function ct(){function t(t,e,n=(()=>{})){if(!t||!e)return t;try{"string"==typeof e&&(e=e.split(" ")),e.filter((t=>t.trim().length>0)).forEach((t=>n(t)))}catch(t){console.error(t)}return t}Element.prototype.addClass=function(e){return t(this,e,(t=>this.classList.add(t)))},Element.prototype.removeClass=function(e){return t(this,e,(t=>this.classList.remove(t)))},Element.prototype.toggleClass=function(e,n){return t(this,e,(t=>this.classList.toggle(t,n)))},Element.prototype.hasClass=function(t){if(!this||!t)return!1;if("string"==typeof t)return this.classList.contains(t);for(let e of t)if(!this.classList.contains(e))return!1;return!0}}function ut(){Element.prototype.setProperties=function(t={},e=!1){return this?(t.out&&("string"==typeof t.out?this.__outName=t.out:Object.assign(t.out,this)),Object.keys(t).forEach((n=>{switch(n){case"tag":case"namespace":case"shadowDOM":return;case"text":if(!(this instanceof HTMLElement))return;return void(this.innerText=t.text);case"style":if(!(this instanceof HTMLElement||this instanceof SVGElement))return;return void(this.style.cssText+=t.style);case"stylesheet":return void U(t.stylesheet,this.closestRoot);case"id":return void(this.id=t.id);case"classes":return void this.addClass(t.classes);case"listeners":return void Object.keys(t.listeners).forEach((e=>this.addListener(e,t.listeners[e],this)));case"children":return void this.addChild(t.children);case"parent":if(!t.parent)return;return void t.parent.addChild(this);default:if(e)return;try{this[n]=t[n]}catch(t){console.error(t)}return}})),this):this},Node.prototype.destroy=function(){return this.removeAllListeners(),this.remove(),this}}function dt(){Object.defineProperty(Node.prototype,"boundListeners",{value:new Set,writable:!1,configurable:!0,enumerable:!0}),Node.prototype.addListener=function(t,e,n=this,i){const s=t=>{"object"==typeof e&&e.handleEvent&&e.handleEvent(t),"function"==typeof e&&e(t,this)};return n.boundListeners.add({target:this,type:t,originalListener:e,listener:s,options:i}),this.addEventListener(t,s,i),this},Node.prototype.removeListener=function(t,e,n){for(let i of this.boundListeners)if(i.type===t&&i.originalListener===e&&i.options===n){i.target.removeEventListener(t,i.listener,n),this.boundListeners.delete(i);break}return this},Node.prototype.removeListenersByType=function(t){for(let e of this.boundListeners)e.type===t&&(this.removeEventListener(t,e.listener,e.options),this.boundListeners.delete(e));return this},Node.prototype.removeAllListeners=function(){for(let t of this.boundListeners)this.removeEventListener(t.type,t.listener,t.options),this.boundListeners.delete(t);return this}}function pt(){const t=new st({properties:"visibility",defaultStyles:{in:"visible",out:"hidden"}});Object.defineProperty(Node.prototype,"closestRoot",{get:function(){let t=this;for(;t;){if(t instanceof Element&&t.shadowRoot)return t.shadowRoot;t=t.parentElement}return document.head},configurable:!1,enumerable:!0}),Object.defineProperty(HTMLElement.prototype,"transitions",{get:function(){return this._transitions||(this._transitions=new ot(this)),this._transitions},configurable:!1,enumerable:!0}),Object.defineProperty(HTMLElement.prototype,"showTransition",{value:t,writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(HTMLElement.prototype,"isShown",{get:function(){const t=this.showTransition.stateOf(this);return t==J.in||t!=J.out&&("none"!=this.style.display&&"hidden"!=this.style.visibility&&"0"!=this.style.opacity)},configurable:!1,enumerable:!0}),HTMLElement.prototype.setStyle=function(t,e,n=!1){return t&&null!=e?(this.pendingStyles||(this.pendingStyles={}),n?this.style[t]=e.toString():this.pendingStyles[t]=e.toString(),n||this.applyStyles(),this):this},HTMLElement.prototype.appendStyle=function(t,e,n=", ",i=!1){if(!t||null==e)return this;this.pendingStyles||(this.pendingStyles={});const s=this.style[t]||"";return n=s.length>0?n:"",i?this.style[t]=s+n+e:this.pendingStyles[t]=s+n+e,i||this.applyStyles(),this},HTMLElement.prototype.setStyles=function(t,e=!1){if(!t||"number"==typeof t)return this;if(this.pendingStyles||(this.pendingStyles={}),"string"==typeof t)t.split(";").forEach((t=>{const[n,i]=t.split(":").map((t=>t.trim()));n&&i&&(e?this.style[n]=i:this.pendingStyles[n]=i)}));else for(const[n,i]of Object.entries(t))e?this.style[n]=i.toString():this.pendingStyles[n]=i.toString();return e||this.applyStyles(),this},HTMLElement.prototype.applyStyles=function(){requestAnimationFrame((()=>{for(const t in this.pendingStyles)"cssText"==t?this.style.cssText+=";"+this.pendingStyles.cssText:this.style[t]=this.pendingStyles[t];this.pendingStyles={}}))},HTMLElement.prototype.show=function(t){return this.showTransition.apply(t?J.in:J.out,this),this}}function mt(){ct(),ht(),dt(),ut(),pt(),at()}class ft{callbacks=new Set;add(t){this.callbacks.add(t)}remove(t){return this.callbacks.delete(t)}fire(...t){for(const e of this.callbacks)try{e(...t)}catch(t){console.error("Error invoking callback:",t)}}clear(){this.callbacks.clear()}}const gt={keyPressed:"turbo-key-pressed",keyReleased:"turbo-key-released"},yt={click:"turbo-click",clickStart:"turbo-click-start",clickEnd:"turbo-click-end",longPress:"turbo-long-press"},Et={move:"turbo-move"},bt={drag:"turbo-drag",dragStart:"turbo-drag-start",dragEnd:"turbo-drag-end"},vt={trackpadScroll:"turbo-trackpad-scroll",trackpadPinch:"turbo-trackpad-pinch",mouseWheel:"turbo-mouse-wheel"},St={...yt,...gt,...Et,...bt,...vt,selectInput:"turbo-select-input"},xt={keyPressed:"keydown",keyReleased:"keyup",click:"click",clickStart:"mousedown",clickEnd:"mouseup",longPress:St.longPress,move:"mousemove",drag:St.drag,dragStart:St.dragStart,dragEnd:St.dragEnd,wheel:"wheel",trackpadScroll:"wheel",trackpadPinch:"wheel",mouseWheel:"wheel",scroll:"scroll",input:"input",change:"change",focus:"focus",blur:"blur"};var Tt,wt,Mt,Pt,kt;!function(t){t.target="target",t.position="position"}(Tt||(Tt={}));class Ct extends Event{clickMode;keys;position;constructor(t,e,n,i,s){super(i,{bubbles:!0,cancelable:!0,...s}),this.clickMode=e,this.keys=n,this.position=t}closest(t,e=!0,n=Tt.target){const i=n==Tt.target?[this.target]:document.elementsFromPoint(this.position.x,this.position.y);for(let n of i){for(;n&&(!(n instanceof t)||e&&!this.isPositionInsideElement(this.position,n));)n=n.parentElement;if(n)return n}return null}isPositionInsideElement(t,e){const n=e.getBoundingClientRect();return t.x>=n.left&&t.x<=n.right&&t.y>=n.top&&t.y<=n.bottom}get target(){return super.target||document}get scaledPosition(){return this.authorizeScaling()?this.scalePosition(this.position):this.position}scalePosition(t){return t}authorizeScaling(){return!0}scalePositionsMap(t){return t.mapValues(((t,e)=>this.scalePosition(e)))}}q([i()],Ct.prototype,"closest",null),q([i()],Ct.prototype,"scaledPosition",null);class Lt{x;y;constructor(t=0,e=("number"==typeof t?t:0)){"number"==typeof t?(this.x=t,this.y=e):"clientX"in t?(this.x=t.clientX,this.y=t.clientY):"x"in t?(this.x=t.x,this.y=t.y):(this.x=t[0],this.y=t[1])}static dist(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static midPoint(...t){if(0==t.length)return null;const e=t.reduce(((t,e)=>t+e.x),0)/t.length,n=t.reduce(((t,e)=>t+e.y),0)/t.length;return new Lt(e,n)}static max(...t){if(0==t.length)return null;const e=t.reduce(((t,e)=>Math.max(t,e.x)),-1/0),n=t.reduce(((t,e)=>Math.max(t,e.y)),-1/0);return new Lt(e,n)}static min(...t){if(0==t.length)return null;const e=t.reduce(((t,e)=>Math.min(t,e.x)),1/0),n=t.reduce(((t,e)=>Math.min(t,e.y)),1/0);return new Lt(e,n)}equals(t,e=0){return"number"==typeof t?this.x==t&&this.y==e:this.x==t.x&&this.y==t.y}boundX(t,e){return this.x<t?t:this.x>e?e:this.x}boundY(t,e){return this.y<t?t:this.y>e?e:this.y}bound(t,e,n=t,i=e){return new Lt(this.boundX(t,e),this.boundY(n,i))}add(t,e){return"number"==typeof t?new Lt(this.x+t,this.y+(e||0==e?e:t)):new Lt(this.x+t.x,this.y+t.y)}sub(t,e){return"number"==typeof t?new Lt(this.x-t,this.y-(e||0==e?e:t)):new Lt(this.x-t.x,this.y-t.y)}mul(t,e){return"number"==typeof t?new Lt(this.x*t,this.y*(e||0==e?e:t)):new Lt(this.x*t.x,this.y*t.y)}div(t,e){return"number"==typeof t?new Lt(this.x/t,this.y/(e||0==e?e:t)):new Lt(this.x/t.x,this.y/t.y)}abs(){return new Lt(Math.abs(this.x),Math.abs(this.y))}max(){return Math.max(this.x,this.y)}min(){return Math.min(this.x,this.y)}copy(){return new Lt(this.x,this.y)}arr(){return[this.x,this.y]}}class Dt extends Ct{origins;previousPositions;positions;constructor(t,e,n,i,s,r=St.drag,o){super(n.first,i,s,r,{bubbles:!0,cancelable:!0,...o}),this.origins=t,this.previousPositions=e,this.positions=n}get scaledOrigins(){return this.authorizeScaling()?this.scalePositionsMap(this.origins):this.origins}get scaledPreviousPositions(){return this.authorizeScaling()?this.scalePositionsMap(this.previousPositions):this.previousPositions}get scaledPositions(){return this.authorizeScaling()?this.scalePositionsMap(this.positions):this.positions}get deltaPositions(){return this.positions.mapValues(((t,e)=>{const n=this.previousPositions.get(t);if(n)return e.sub(n)}))}get deltaPosition(){return Lt.midPoint(...this.deltaPositions.valuesArray())}get scaledDeltaPositions(){return this.scaledPositions.mapValues(((t,e)=>{const n=this.scaledPreviousPositions.get(t);if(n)return e.sub(n)}))}get scaledDeltaPosition(){return Lt.midPoint(...this.scaledDeltaPositions.valuesArray())}}q([i()],Dt.prototype,"scaledOrigins",null),q([i()],Dt.prototype,"scaledPreviousPositions",null),q([i()],Dt.prototype,"scaledPositions",null),q([i()],Dt.prototype,"deltaPositions",null),q([i()],Dt.prototype,"deltaPosition",null),q([i()],Dt.prototype,"scaledDeltaPositions",null),q([i()],Dt.prototype,"scaledDeltaPosition",null);class At extends Ct{keyPressed;keyReleased;constructor(t,e,n,i,s=St.keyPressed,r){super(null,n,i,s,{bubbles:!0,cancelable:!0,...r}),this.keyPressed=t,this.keyReleased=e}}!function(t){t[t.none=0]="none",t[t.click=1]="click",t[t.longPress=2]="longPress",t[t.drag=3]="drag"}(wt||(wt={})),function(t){t[t.none=0]="none",t[t.left=1]="left",t[t.right=2]="right",t[t.middle=3]="middle",t[t.other=4]="other",t[t.key=5]="key"}(Mt||(Mt={})),function(t){t[t.unknown=0]="unknown",t[t.mouse=1]="mouse",t[t.trackpad=2]="trackpad",t[t.touch=3]="touch"}(Pt||(Pt={}));class Ot extends Ct{delta;constructor(t,e,n,i){super(null,Mt.none,e,n,{bubbles:!0,cancelable:!0,...i}),this.delta=t}}function Ft(t){HTMLElement.prototype.bypassTurboEventManagerOn=t=>!0;const n=function(e){const n=this.bypassTurboEventManagerOn(e);"boolean"==typeof n?t.setLockState(this,{enabled:n,preventDefaultWheel:n,preventDefaultMouse:n,preventDefaultTouch:n}):t.setLockState(this,{enabled:n.enabled||!1,preventDefaultWheel:n.preventDefaultWheel||!1,preventDefaultMouse:n.preventDefaultMouse||!1,preventDefaultTouch:n.preventDefaultTouch||!1})};HTMLElement.prototype.bypassTurboEventManager=function(){return this.addListener("mousedown",(t=>n.call(this,t))),this.addListener("touchstart",(t=>n.call(this,t))),this},e(HTMLElement.prototype,"bypassTurboEventManager")}class It extends Map{enforceImmutability=!0;set(t,e){return super.set(t,this.enforceImmutability?this.copy(e):e)}get(t){const e=super.get(t);return this.enforceImmutability?this.copy(e):e}get first(){if(0==this.size)return null;const t=this.values().next().value;return this.enforceImmutability?this.copy(t):t}get last(){if(0==this.size)return null;const t=this.valuesArray()[this.size-1];return this.enforceImmutability?this.copy(t):t}keysArray(){return Array.from(this.keys())}valuesArray(){return Array.from(this.values())}copy(t){if(t&&"object"==typeof t){if(t instanceof Array)return t.map((t=>this.copy(t)));if(t.constructor&&t.constructor!=Object){if("function"==typeof t.clone)return t.clone();if("function"==typeof t.copy)return t.copy()}return{...t}}return t}mapKeys(t){const e=new It;for(let[n,i]of this)e.set(t(n,i),i);return e}mapValues(t){const e=new It;for(let[n,i]of this)e.set(n,t(n,i));return e}filter(t){const e=new It;for(let[n,i]of this)t(n,i)&&e.set(n,i);return e}merge(t){for(let[e,n]of t)this.set(e,n);return this}}class _t{_inputDevice=Pt.unknown;onInputDeviceChange;defaultState={};lockState={};disabledEventTypes={};currentKeys=[];currentAction=wt.none;currentClick=Mt.none;wasRecentlyTrackpad=!1;origins;previousPositions;timerMap;moveThreshold;longPressDuration;constructor(t={}){this.onInputDeviceChange=new ft,this.defaultState={enabled:t.enabled??!0,preventDefaultWheel:t.preventDefaultWheel??!0,preventDefaultMouse:t.preventDefaultMouse??!0,preventDefaultTouch:t.preventDefaultTouch??!0},this.resetLockState(),this.disabledEventTypes={...t},this.moveThreshold=t.moveThreshold||10,this.longPressDuration=t.longPressDuration||500,this.origins=new It,this.previousPositions=new It,this.timerMap=new It;for(let t in St)xt[t]=St[t];this.initEvents(),Ft(this)}initEvents(){try{this.disabledEventTypes.disableKeyEvents||(document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp),this.applyEventNames(gt)),this.disabledEventTypes.disableWheelEvents||(document.addEventListener("wheel",this.wheel,{passive:!1}),this.applyEventNames(vt)),this.disabledEventTypes.disableMoveEvent||this.applyEventNames(Et),this.disabledEventTypes.disableMouseEvents||(document.addEventListener("mousedown",this.pointerDown),document.addEventListener("mousemove",this.pointerMove),document.addEventListener("mouseup",this.pointerUp),document.addEventListener("mouseleave",this.pointerLeave)),this.disabledEventTypes.disableTouchEvents||(document.addEventListener("touchstart",this.pointerDown,{passive:!1}),document.addEventListener("touchmove",this.pointerMove,{passive:!1}),document.addEventListener("touchend",this.pointerUp,{passive:!1}),document.addEventListener("touchcancel",this.pointerUp,{passive:!1})),this.disabledEventTypes.disableMouseEvents&&this.disabledEventTypes.disableTouchEvents||(this.disabledEventTypes.disableClickEvents||this.applyEventNames(yt),this.disabledEventTypes.disableDragEvents||this.applyEventNames(bt))}catch(t){console.error("Error initializing events: ",t)}}destroy(){document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp),document.removeEventListener("wheel",this.wheel),document.removeEventListener("mousedown",this.pointerDown),document.removeEventListener("mousemove",this.pointerMove),document.removeEventListener("mouseup",this.pointerUp),document.removeEventListener("mouseleave",this.pointerLeave),document.removeEventListener("touchstart",this.pointerDown),document.removeEventListener("touchmove",this.pointerMove),document.removeEventListener("touchend",this.pointerUp),document.removeEventListener("touchcancel",this.pointerUp)}get inputDevice(){return this._inputDevice}set inputDevice(t){this.inputDevice!=t&&(t==Pt.trackpad&&(this.wasRecentlyTrackpad=!0),this._inputDevice=t,this.onInputDeviceChange.fire(t))}setLockState(t,e){this.lockState.lockOrigin=t;for(const t in e)this.lockState[t]=e[t]}resetLockState(){this.lockState.enabled=this.defaultState.enabled,this.lockState.preventDefaultWheel=this.defaultState.preventDefaultWheel,this.lockState.preventDefaultMouse=this.defaultState.preventDefaultMouse,this.lockState.preventDefaultTouch=this.defaultState.preventDefaultTouch,this.lockState.lockOrigin=document.body}get enabled(){return this.defaultState.enabled&&this.lockState.enabled}get preventDefaultWheel(){return this.defaultState.preventDefaultWheel&&this.lockState.preventDefaultWheel}get preventDefaultMouse(){return this.defaultState.preventDefaultMouse&&this.lockState.preventDefaultMouse}get preventDefaultTouch(){return this.defaultState.preventDefaultTouch&&this.lockState.preventDefaultTouch}keyDown=t=>{this.enabled&&(this.currentKeys.includes(t.key)||(this.currentKeys.push(t.key),document.dispatchEvent(new At(t.key,null,this.currentClick,this.currentKeys,St.keyPressed))))};keyUp=t=>{this.enabled&&this.currentKeys.includes(t.key)&&(this.currentKeys.splice(this.currentKeys.indexOf(t.key),1),document.dispatchEvent(new At(null,t.key,this.currentClick,this.currentKeys,St.keyReleased)))};wheel=t=>{if(!this.enabled)return;let e;this.preventDefaultWheel&&t.preventDefault(),(Math.abs(t.deltaY)<=40||0!=t.deltaX)&&(this.inputDevice=Pt.trackpad),this.wasRecentlyTrackpad||(this.inputDevice=Pt.mouse),this.clearTimer("recentlyTrackpadTimer"),this.setTimer("recentlyTrackpadTimer",(()=>{this.inputDevice==Pt.trackpad&&(this.wasRecentlyTrackpad=!1)}),800),e=this.inputDevice==Pt.trackpad&&t.ctrlKey?St.trackpadPinch:this.inputDevice==Pt.trackpad?St.trackpadScroll:St.mouseWheel,document.dispatchEvent(new Ot(new Lt(t.deltaX,t.deltaY),this.currentKeys,e))};pointerDown=t=>{if(t.composedPath().includes(this.lockState.lockOrigin)||this.resetLockState(),!this.enabled)return;const e=t instanceof TouchEvent;if(this.preventDefaultMouse&&!e&&t.preventDefault(),this.preventDefaultTouch&&e&&t.preventDefault(),e?this.inputDevice=Pt.touch:this.inputDevice!=Pt.unknown&&this.inputDevice!=Pt.touch||(this.inputDevice=Pt.mouse),e)Array.from(t.changedTouches).forEach((t=>{const e=new Lt(t);this.origins.set(t.identifier,e),this.previousPositions.set(t.identifier,e)})),this.setClickMode(t.touches.length,!0);else{const e=new Lt(t);this.origins.set(0,e),this.previousPositions.set(0,e),this.setClickMode(t.button)}this.disabledEventTypes.disableClickEvents||(this.fireClick(this.origins.first,St.clickStart),this.currentAction=wt.click,this.setTimer(St.longPress,(()=>{this.currentAction==wt.click&&(this.currentAction=wt.longPress,this.fireClick(this.origins.first,St.longPress))}),this.longPressDuration))};pointerMove=t=>{if(!this.enabled)return;if(this.disabledEventTypes.disableMoveEvent&&this.disabledEventTypes.disableDragEvents)return;const e=t instanceof TouchEvent;this.preventDefaultMouse&&!e&&t.preventDefault(),this.preventDefaultTouch&&e&&t.preventDefault();const n=new It;if(e?Array.from(t.touches).forEach((t=>n.set(t.identifier,new Lt(t)))):n.set(0,new Lt(t.clientX,t.clientY)),this.disabledEventTypes.disableMoveEvent||this.fireDrag(n,St.move),this.currentAction!=wt.none&&!this.disabledEventTypes.disableDragEvents){if(this.currentAction!=wt.drag){if(!Array.from(this.origins.entries()).some((([t,e])=>{const i=n.get(t);return i&&Lt.dist(i,e)>this.moveThreshold})))return;o(this),this.fireDrag(this.origins,St.dragStart),this.currentAction=wt.drag}this.fireDrag(n)}n.forEach(((t,e)=>this.previousPositions.set(e,t)))};pointerUp=t=>{if(!this.enabled)return;const e=t instanceof TouchEvent;this.preventDefaultMouse&&!e&&t.preventDefault(),this.preventDefaultTouch&&e&&t.preventDefault(),this.clearTimer(St.longPress);const n=new It;e?Array.from(t.changedTouches).forEach((t=>{n.set(t.identifier,new Lt(t))})):n.set(0,new Lt(t)),this.currentAction!=wt.drag||this.disabledEventTypes.disableDragEvents||this.fireDrag(n,St.dragEnd),this.disabledEventTypes.disableClickEvents||(this.currentAction==wt.click&&this.fireClick(n.first,St.click),this.fireClick(this.origins.first,St.clickEnd)),e?Array.from(t.changedTouches).forEach((t=>{this.origins.delete(t.identifier),this.previousPositions.delete(t.identifier)})):(this.origins.clear(),this.previousPositions.clear()),this.currentAction=wt.none,this.currentClick=Mt.none};pointerLeave=()=>{this.enabled&&this.currentAction!=wt.none&&(this.clearTimer(St.longPress),this.currentAction!=wt.drag&&(this.fireClick(this.origins.first,St.clickEnd),this.currentAction=wt.none))};getFireOrigin(t){const e=this.origins.first?this.origins.first:t.first;return document.elementFromPoint(e.x,e.y)||document}fireClick(t,e=St.click){if(!t)return;(document.elementFromPoint(t.x,t.y)||document).dispatchEvent(new Ct(t,this.currentClick,this.currentKeys,e))}fireDrag(t,e=St.drag){t&&this.getFireOrigin(t).dispatchEvent(new Dt(this.origins,this.previousPositions,t,this.currentClick,this.currentKeys,e))}setTimer(t,e,n){this.clearTimer(t),this.timerMap.set(t,setTimeout((()=>{e(),this.clearTimer(t)}),n))}clearTimer(t){const e=this.timerMap.get(t);e&&(clearTimeout(e),this.timerMap.delete(t))}setClickMode(t,e=!1){switch(e&&t--,t){case-1:return void(this.currentClick=Mt.none);case 0:return void(this.currentClick=Mt.left);case 1:return void(this.currentClick=Mt.middle);case 2:return void(this.currentClick=Mt.right);default:return void(this.currentClick=Mt.other)}}applyEventNames(t){for(const e in t)xt[e]=t[e]}}function Nt(t){let e=document.createElement("div");return e.innerHTML=t,e.children[0]}function Vt(t){return new Promise(((e,n)=>{t&&0!==t.length?fetch(t).then((t=>{if(!t.ok)throw new Error("Network response was not ok while loading your SVG");return t.text()})).then((t=>{const n=Nt(t);if(!n)throw new Error("Error parsing SVG text");e(n)})).catch((t=>{console.error("Error fetching SVG:",t),n(t)})):n(new Error("Invalid path"))}))}let Gt=class extends lt{static{kt=this}_element=null;_type;_directory;_icon;_iconColor=null;_onLoaded=null;static config={defaultType:"svg",defaultDirectory:""};constructor(t){super(t),this.update(t)}update(t){t.unsetDefaultClasses?this.removeClass(kt.config.defaultClasses):this.addClass(kt.config.defaultClasses),this.type=t.type,this.directory=t.directory,t.iconColor&&(this.iconColor=t.iconColor),t.onLoaded&&(this._onLoaded=t.onLoaded),this.icon=t.icon}fetchSvg(t){return Vt(t)}generateSvg(){this.clear(),this.fetchSvg(this.path).then((t=>{this.element||(this.element=t,this.addChild(this.element),this.element&&(this.iconColor&&(this.element.style.fill=this.iconColor),this._onLoaded&&this._onLoaded(this.element)))}))}generateImg(){if(this.element instanceof HTMLImageElement)return this.element.src=this.path,void(this.element.alt=this.icon);this.clear(),this.element=I({src:this.path,alt:this.icon,parent:this})}clear(){this.removeAllChildren(),this.element=null}get type(){return this._type}set type(t){t&&0!=t.length||(t=this.type||kt.config.defaultType||"svg"),this._type=t}get directory(){return this._directory}set directory(t){t||(t=this.directory||kt.config.defaultDirectory||""),t.length>0&&!t.endsWith("/")&&(t+="/"),this._directory=t}get path(){let t=this.icon.endsWith("."+this.type)||0==this.type.length?"":"."+this.type;return this.directory+this.icon+t}get icon(){return this._icon}set icon(t){this.type=u(t).substring(1),this._icon=t,"svg"==this.type?this.generateSvg():this.generateImg()}get iconColor(){return this._iconColor}set iconColor(t){this._iconColor=t,this.element instanceof SVGElement&&t&&(this.element.style.fill=t)}set element(t){this._element=t}get element(){return this._element}};function zt(t){return new Gt(t)}function jt(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}q([i()],Gt.prototype,"fetchSvg",null),q([m],Gt.prototype,"icon",null),q([m],Gt.prototype,"iconColor",null),Gt=kt=q([a("turbo-icon")],Gt);var $t;jt("turbo-button{align-items:center;background-color:#dadada;border:1px solid #000;border-radius:.4em;color:#000;display:inline-flex;flex-direction:row;gap:.4em;padding:.5em .7em;text-decoration:none}turbo-button>h4{flex-grow:1}");let Rt=class extends lt{static{$t=this}elements;_buttonTextTag;static config={defaultTextTag:"h4"};constructor(t){super(t),this.elements={leftCustomElements:null,leftIcon:null,buttonText:null,rightIcon:null,rightCustomElements:null},this.buttonTextTag=t.customTextTag,t.unsetDefaultClasses||this.addClass($t.config.defaultClasses),t.leftCustomElements&&(this.leftCustomElements=t.leftCustomElements),t.leftIcon&&(this.leftIcon=t.leftIcon),t.buttonText&&(this.buttonText=t.buttonText),t.rightIcon&&(this.rightIcon=t.rightIcon),t.rightCustomElements&&(this.rightCustomElements=t.rightCustomElements)}addAtPosition(t,e){if(!t)return;let n=0;for(let t in this.elements){if(t==e)break;this.elements[t]&&n++}this.addChild(t,n)}removeElement(t){t&&(Array.isArray(t)?t.forEach((t=>this.removeChild(t))):this.removeChild(t))}get buttonTextTag(){return this._buttonTextTag}set buttonTextTag(t){t||(t=$t.config.defaultTextTag||"h4"),this._buttonTextTag=t}get leftCustomElements(){return this.elements.leftCustomElements}set leftCustomElements(t){this.addAtPosition(t,"leftCustomElements"),this.removeElement(this.leftCustomElements),this.elements.leftCustomElements=t}get leftIcon(){return this.elements.leftIcon}set leftIcon(t){"string"==typeof t&&(t=new Gt({icon:t})),this.addAtPosition(t,"leftIcon"),this.removeElement(this.leftIcon),this.elements.leftIcon=t}get buttonText(){return this.elements.buttonText}set buttonText(t){if("string"==typeof t){if(this.buttonText&&"innerText"in this.buttonText)return void(this.buttonText.innerText=t);t=S({tag:this.buttonTextTag,text:t})}this.addAtPosition(t,"buttonText"),this.removeElement(this.buttonText),this.elements.buttonText=t}get rightIcon(){return this.elements.rightIcon}set rightIcon(t){"string"==typeof t&&(t=new Gt({icon:t})),this.addAtPosition(t,"rightIcon"),this.removeElement(this.rightIcon),this.elements.rightIcon=t}get rightCustomElements(){return this.elements.rightCustomElements}set rightCustomElements(t){this.addAtPosition(t,"rightCustomElements"),this.removeElement(this.rightCustomElements),this.elements.rightCustomElements=t}};function Bt(t){return new Rt(t)}Rt=$t=q([a("turbo-button")],Rt);let Ht=class extends Gt{_toggled=!1;onToggle;constructor(t){super(t),this.toggled=t.toggled,this.onToggle=t.onToggle}get toggled(){return this._toggled}set toggled(t){this._toggled=t,this.onToggle&&this.onToggle(t,this)}toggle(){this.toggled=!this.toggled}};function Wt(t){return new Ht(t)}Ht=q([a("turbo-icon-toggle")],Ht);let Kt=class extends lt{inputElement;labelElement;prefixElement;suffixElement;locked;constructor(t={}){super(t),this.locked=t.locked||!1,t.label&&(this.labelElement=S({tag:"label",text:t.label,parent:this}));const e=S({parent:this});t.prefix&&(this.prefixElement=S({tag:"span",text:t.prefix,parent:e})),this.inputElement=S({...t.inputProperties,tag:t.inputTag,parent:e}),t.suffix&&(this.suffixElement=S({tag:"span",text:t.suffix,parent:e})),this.setupEvents(t)}setupEvents(t){"bypassTurboEventManager"in this.inputElement&&this.inputElement.bypassTurboEventManager(),t.onClick&&this.inputElement.addEventListener(xt.click,(e=>t.onClick(e))),t.onBlur&&this.inputElement.addEventListener(xt.blur,(e=>t.onBlur(e))),this.inputElement.addEventListener(xt.focus,(()=>{this.locked&&this.inputElement.blur(),t.selectTextOnFocus&&this.inputElement.select()})),this.inputElement.addEventListener(xt.input,(e=>{if(t.dynamicVerticalResize&&(this.inputElement.style.height="",this.inputElement.style.height=this.inputElement.scrollHeight+"px"),t.regexCheck){const e=t.regexCheck instanceof RegExp?t.regexCheck:new RegExp(t.regexCheck,"g");this.value=this.value.toString().replace(e,"")}else this.value=this.value;t.onInput&&t.onInput(e)}))}get value(){return this.inputElement.value}set value(t){this.inputElement.value=t.toString()}};function Ut(t={}){return new Kt(t)}Kt=q([a("turbo-input")],Kt);let qt=class extends Kt{multiplier;decimalPlaces;min;max;constructor(t={}){t.regexCheck=/^(?!-0?(\.0+)?$)-?(0|[1-9]\d*)?(\.\d+)?(?<=\d)$/,super(t),this.multiplier=t.multiplier||1,this.decimalPlaces=t.decimalPlaces,this.min=t.min,this.max=t.max}get value(){return Number.parseFloat(this.inputElement.value)/this.multiplier}set value(t){t&&""!=t||(t=0),"string"==typeof t&&(t=Number.parseFloat(t)),t*=this.multiplier,null!=this.min&&t<this.min&&(t=this.min),null!=this.max&&t>this.max&&(t=this.max),null!=this.decimalPlaces&&(t=Math.round(t*Math.pow(10,this.decimalPlaces))/Math.pow(10,this.decimalPlaces)),this.inputElement.value=t.toString()}};function Xt(t={}){return new qt(t)}var Yt,Jt;qt=q([a("turbo-numerical-input")],qt),function(t){t.invert="invert",t.offset="offset",t.none="none"}(Yt||(Yt={}));let Zt=class extends lt{static{Jt=this}_popupAnchor;_parentAnchor;_viewportMargin;_offsetFromParent;fallbackModes;static config={defaultPopupAnchor:{x:0,y:-100},defaultParentAnchor:{x:0,y:100},defaultViewportMargin:4,defaultOffsetFromParent:{x:0,y:4}};constructor(t={}){super(t),this.setStyle("position","fixed"),t.unsetDefaultClasses||this.addClass(Jt.config.defaultClasses),this.popupAnchor=t.popupAnchor||Jt.config.defaultPopupAnchor||{x:50,y:0},this.parentAnchor=t.parentAnchor||Jt.config.defaultParentAnchor||{x:50,y:100},this.viewportMargin=t.viewportMargin||Jt.config.defaultViewportMargin||0,this.offsetFromParent=t.offsetFromParent||Jt.config.defaultOffsetFromParent||0,this.fallbackModes=t.fallbackModes||{x:Math.abs(this.parentAnchor.x-50)>25?Yt.invert:Yt.offset,y:Math.abs(this.parentAnchor.y-50)>25?Yt.invert:Yt.offset},this.addListeners(),this.show(!1)}addListeners(){document.addEventListener(xt.scroll,(()=>this.show(!1))),document.addEventListener(xt.click,(t=>{this.isShown&&!this.contains(t.target)&&this.show(!1)}))}get popupAnchor(){return this._popupAnchor}set popupAnchor(t){this._popupAnchor=new Lt(t).bound(0,100)}get parentAnchor(){return this._parentAnchor}set parentAnchor(t){this._parentAnchor=new Lt(t).bound(0,100)}get viewportMargin(){return this._viewportMargin}set viewportMargin(t){this._viewportMargin=new Lt(t)}get offsetFromParent(){return this._offsetFromParent}set offsetFromParent(t){this._offsetFromParent=new Lt(t)}get rect(){return this.getBoundingClientRect()}get parentRect(){return this.parentElement.getBoundingClientRect()}get computedStyle(){return window.getComputedStyle(this)}get parentComputedStyle(){return window.getComputedStyle(this.parentElement)}recomputePosition(){if(!this.parentElement)return;const t=this.recomputeSide(Y.vertical),e=this.recomputeSide(Y.horizontal);this.recomputeMaxSize(t,Y.vertical),this.recomputeMaxSize(e,Y.horizontal)}recomputeSide(t){const e=this.generateDimensionParameters(t),n=this.rect[e.size]+this.offsetFromParent[e.coordinate]+parseFloat(this.computedStyle[e.marginStart])+parseFloat(this.computedStyle[e.marginEnd]),i=this.parentRect[e.size]*this.parentAnchor[e.coordinate]/100,s=n*this.popupAnchor[e.coordinate]/100,r=i-s,o=r>0?1:-1,l=this.offsetFromParent[e.coordinate]*o,a=this.viewportMargin[e.coordinate]*o,h=r+a;let c=this.parentRect[e.side]+r+l;if(this.fallbackModes[e.coordinate]==Yt.invert){const t=this.parentRect[e.size]-i+(n-s),l=t-a;(r>=0&&window[e.innerSize]-this.parentRect[e.side]<n+h&&this.parentRect[e.side]>=n-l||r<0&&this.parentRect[e.side]<-r-h&&window[e.innerSize]-this.parentRect[e.side]>=t+l)&&(c=this.parentRect[e.side]-t*o)}else if(this.fallbackModes[e.coordinate]==Yt.offset)if(r<0){const t=this.parentRect[e.side]+h;t<0&&(c-=t)}else{const t=window[e.innerSize]-this.parentRect[e.side]-(n+h);t>0&&(c-=t)}return this.style[e.side]=c+"px",c}recomputeMaxSize(t,e){const n=this.generateDimensionParameters(e),i=window[n.innerSize]-t-this.viewportMargin[n.coordinate]-parseFloat(this.computedStyle[n.marginStart])-parseFloat(this.computedStyle[n.marginEnd])-parseFloat(this.parentComputedStyle[n.marginStart])-parseFloat(this.parentComputedStyle[n.marginEnd]);this.computedStyle[n.maxSize]&&parseFloat(this.computedStyle[n.maxSize])<=i||(this.style[n.maxSize]=i+"px")}clearMaxDimensions(){this.style.maxHeight="",this.style.maxWidth=""}show(t){return this.isShown==t||requestAnimationFrame((()=>{t?this.recomputePosition():this.clearMaxDimensions(),super.show(t)})),this}toggle(){return this.show(!this.isShown)}generateDimensionParameters(t){const e=t==Y.vertical;return{size:e?"height":"width",innerSize:e?"innerHeight":"innerWidth",maxSize:e?"maxHeight":"maxWidth",marginStart:e?"marginTop":"marginLeft",marginEnd:e?"marginBottom":"marginRight",side:e?"top":"left",coordinate:e?"y":"x"}}};function Qt(t={}){return new Zt(t)}var te;q([i({clearOnNextFrame:!0})],Zt.prototype,"rect",null),q([i({clearOnNextFrame:!0})],Zt.prototype,"parentRect",null),q([i({clearOnNextFrame:!0})],Zt.prototype,"computedStyle",null),q([i({clearOnNextFrame:!0})],Zt.prototype,"parentComputedStyle",null),Zt=Jt=q([a("turbo-popup")],Zt);let ee=te=class extends lt{_value;_selected;_enabled;selectedClasses="";onSelected;onEnabled;reflectedElement;inputElement;config={};constructor(t){super(t),t.unsetDefaultClasses||this.addClass(te.config.defaultClasses),this.selectedClasses=t.selectedClasses,this.onSelected=t.onSelected||(()=>{}),this.onEnabled=t.onEnabled||(()=>{}),this.reflectedElement=null!=t.reflectValueOn?t.reflectValueOn:this,this.inputName=t.inputName,this.value=t.value,this.selected=t.selected||!1,this.enabled=t.enabled||!0}toggle(){this.selected=!this.selected}get value(){return this._value}set value(t){this._value=t,this.reflectedElement&&(this.reflectedElement.innerText=this.stringValue),this.inputElement&&(this.inputElement.value=this.stringValue)}get stringValue(){return h(this.value)}get selected(){return this._selected}set selected(t){t!=this.selected&&(this._selected=t,this.toggleClass(this.selectedClasses,t),this.onSelected(t))}set enabled(t){!t&&this.selected&&(this.selected=!1),this.transitions.enabled=t,this.setStyle("visibility",t?"":"hidden"),this.onEnabled(t)}get inputName(){return this.inputElement?.name||null}set inputName(t){t&&(this.inputElement?this.inputElement.name=t:this.inputElement=_({type:"hidden",name:t,parent:this,value:this.stringValue}))}};function ne(t){return new ee(t)}q([t()],ee.prototype,"enabled",null),ee=te=q([a("turbo-select-entry")],ee);class ie extends Ct{toggledEntry;values;constructor(t,e,n=Mt.left,i){super(null,n,null,St.selectInput,i),this.toggledEntry=t,this.values=e}}function se(t,e,n=0){return t<n&&(t=n),t>e&&(t=e),t}function re(t,e=0){for(;t<0;)t-=e;for(;t>=e;)t+=e;return t}var oe;let le=class extends lt{static{oe=this}entries=[];entriesParent;enabled;inputName;multiSelection=!1;forceSelection=!1;selectedEntryClasses;static config={};constructor(t){super(t),t.unsetDefaultClasses||this.addClass(oe.config.defaultClasses),t.selectedValues||(t.selectedValues=[]),this.entriesParent=t.entriesParent??this,this.multiSelection=t.multiSelection??!1,this.forceSelection=t.forceSelection??!this.multiSelection,this.inputName=t.inputName,this.selectedEntryClasses=t.customSelectedEntryClasses||oe.config.defaultSelectedEntryClasses,(t.values??[]).forEach((e=>{e=this.addEntry(e),t.selectedValues?.includes(e.value)&&this.select(e)}))}addEntry(t){return t instanceof ee||("object"==typeof t&&"value"in t?(t.inputName||(t.inputName=this.inputName),t=ne(t)):t=ne({value:t,inputName:this.inputName})),t.selectedClasses||(t.selectedClasses=this.selectedEntryClasses),t.addEventListener(xt.click,(e=>this.onEntryClick(t,e))),this.entriesParent.addChild(t),this.entries.push(t),t}onEntryClick(t,e){this.select(t)}select(t){if(!(t instanceof ee)){let e=this.enabledEntries.find((e=>e.value==t));if(!e)return this;t=e}return this.multiSelection||this.selectedEntries.forEach((e=>{t!=e&&e.toggle()})),!t.selected&&this.forceSelection&&0==this.selectedEntries.length&&t.toggle(),this.dispatchEvent(new ie(t,this.selectedValues)),this}selectByIndex(t,e=se){return t=e(t,this.entries.length-1,0),this.select(this.entries[t])}deselectAll(){this.selectedEntries.forEach((t=>t.toggle()))}reset(){this.deselectAll(),this.onEntryClick(this.enabledEntries[0])}get enabledEntries(){return this.entries.filter((t=>t.enabled))}get enabledValues(){return this.enabledEntries.map((t=>t.value))}find(t){return this.entries.find((e=>e.value==t))}findAll(...t){return this.entries.filter((e=>t.includes(e.value)))}enable(t,...e){e.forEach((e=>{e instanceof ee?e.enabled=t:this.find(e).enabled=t}))}get selectedEntries(){return this.entries.filter((t=>t.selected))}get selectedEntry(){return this.entries.find((t=>t.selected))}get selectedValues(){return this.selectedEntries.map((t=>t.value))}get selectedValue(){return this.selectedEntry.value}get stringSelectedValue(){return this.selectedEntries.map((t=>t.stringValue)).join(", ")}get values(){return this.entries.map((t=>t.value))}set values(t){const e=[];this.entries.forEach(((n,i)=>{n.selected&&i<t.length&&e.push(i)}));for(const t of this.entries)t.remove();this.entries.splice(0,this.entries.length);for(const e of t)this.addEntry(e);for(const t of e)this.select(this.entries[t])}};function ae(t){return new le(t)}le=oe=q([a("turbo-select")],le);var he;jt("turbo-dropdown{display:inline-block;position:relative}turbo-dropdown>turbo-popup{background-color:#fff;border:.1em solid #5e5e5e;border-radius:.4em;display:flex;flex-direction:column;overflow:hidden}turbo-dropdown>turbo-popup>turbo-select-entry{padding:.5em}turbo-dropdown>turbo-popup>turbo-select-entry:not(:last-child){border-bottom:.1em solid #bdbdbd}");let ce=class extends le{static{he=this}selector;popup;popupOpen=!1;static config={defaultEntryTag:"h4",defaultSelectorTag:"h4"};constructor(t){t.entriesParent=t.popup||Qt(),super(t),this.selector=t.selector instanceof HTMLElement?t.selector:Bt({buttonText:"",customTextTag:t.customSelectorTag||he.config.defaultSelectorTag}),this.popup=t.entriesParent,this.initPopup(t),this.initSelector(t),document.addEventListener(xt.click,(t=>{this.popupOpen&&!this.contains(t.target)&&this.openPopup(!1)}))}initSelector(t){this.selector instanceof Rt&&(this.selector.buttonText="string"==typeof t.selector?t.selector:"string"==typeof t.values[0]?t.values[0]:t.values[0].value),this.selector.addListener(xt.click,(t=>{this.openPopup(!this.popupOpen),t.stopImmediatePropagation()})),this.addChild(this.selector),this.selector.addClass(t.customSelectorClasses?t.customSelectorClasses:he.config.defaultSelectorClasses)}initPopup(t){this.addChild(this.popup),this.popup.show(!1),this.popup.addClass(t.customPopupClasses?t.customPopupClasses:he.config.defaultPopupClasses)}onEntryClick(t){super.onEntryClick(t),this.openPopup(!1)}select(t){return super.select(t),this.selector instanceof Rt&&(this.selector.buttonText=this.selectedValue),this}openPopup(t){this.popupOpen!=t&&(this.popupOpen=t,this.popup,this.popup.show(t))}};function ue(t){return new ce(t)}ce=he=q([a("turbo-dropdown")],ce);jt("turbo-dropdown-entry{padding:.5em .7em;width:100%}turbo-dropdown-entry:hover{background-color:#d7d7d7}turbo-dropdown-entry:not(:last-child){border-bottom:.1em solid #bdbdbd}");let de=class extends ee{constructor(t){super(t)}};function pe(t){return new de(t)}de=q([a("turbo-dropdown-entry")],de);let me=class extends le{transition;semiMajor;semiMinor;currentOrigin;minDragDistance;set startAngle(t){}set endAngle(t){}constructor(t={}){super({...t}),super.show(!1),this.startAngle=0,this.endAngle=t.endAngle??2*Math.PI,this.semiMajor=t.semiMajor??50,this.semiMinor=t.semiMinor??45,this.minDragDistance=t.minDragDistance??20,this.transition=t.transition instanceof st?t.transition:this.initializeTransition(t.transition??{}),this.transition.initialize(J.out,this.entries),this.setStyles({position:"fixed",top:0,left:0}),this.showTransition=this.showTransition.clone(),this.showTransition.delay={out:(t,e)=>.13+.02*e,in:0},this.initEvents()}get totalAngle(){let t=this.endAngle-this.startAngle;for(;t>2*Math.PI;)t-=2*Math.PI;return t}initEvents(){const t=()=>{this.isShown&&this.show(!1)};document.addEventListener(xt.scroll,t),document.addEventListener(xt.dragStart,t)}initializeTransition(t){return t.properties||(t.properties="opacity transform"),null==t.duration&&(t.duration=.1),t.timingFunction||(t.timingFunction={in:"ease-out",out:"ease-in"}),t.delay||(t.delay={in:t=>.01+.02*t,out:(t,e)=>.01+.02*(e-t)}),t.defaultStyles||(t.defaultStyles={in:(t,e)=>{const n=this.computeAngle(t,e),i=this.semiMajor*Math.cos(n),s=this.semiMinor*Math.sin(n);return{opacity:1,top:s+"px",left:i+"px",transform:`translate3d(${-50*(1-i/this.semiMajor)}%, ${-50*(1-s/this.semiMinor)}%, 0)`}},out:{opacity:0,transform:"translate3d(-50%, -50%, 0)"}}),rt(t)}computeAngle(t,e){const n=e-(this.totalAngle<2*Math.PI?1:0);let i=this.totalAngle*t/n+this.startAngle;for(i+=.2*Math.sin(2*(i+Math.PI/2));i<0;)i+=2*Math.PI;for(;i>=2*Math.PI;)i-=2*Math.PI;return i}addEntry(t){return t=super.addEntry(t),this.transition?.initialize(this.isShown?J.in:J.out,t,!0),t.setStyles({position:"absolute"}),t}show(t=!this.isShown,e){return this.currentOrigin=e||new Lt(this.offsetLeft,this.offsetTop),e&&t&&this.setStyle("transform",`translate3d(${e.x}px, ${e.y}px, 0)`),this.transition.apply(t?J.in:J.out,this.enabledEntries),super.show(t),this}getEntryInDirection(t){if(!this.currentOrigin)return null;if(Lt.dist(t,this.currentOrigin)<this.minDragDistance)return null;let e=Math.atan2(t.y-this.currentOrigin.y,t.x-this.currentOrigin.x);e<0&&(e+=2*Math.PI);let n=null,i=1/0;return this.enabledEntries.forEach(((t,s)=>{const r=this.computeAngle(s,this.enabledEntries.length),o=Math.abs(r-e);o<i&&(i=o,n=t)})),n}};function fe(t,e,n,i,s,r=!0){if(r){const i=Math.max(e,n),s=Math.min(e,n);t>i&&(t=i),t<s&&(t=s)}return i+(t-e)*(s-i)/(n-e)}q([t({callBefore:t=>t-Math.PI/2})],me.prototype,"startAngle",null),q([t({callBefore:t=>t-Math.PI/2})],me.prototype,"endAngle",null),me=q([a("turbo-marking-menu")],me);let ge=class extends le{transition;sizePerEntry=[];direction;opacity;scale;size;dragging;openTimeout;constructor(t){t.multiSelection=!1,t.forceSelection=!0,super(t),this.opacity=t.opacity??{max:1,min:0},this.scale=t.scale??{max:1,min:.5},this.size="object"==typeof t.size?t.size:{max:t.size??100,min:-(t.size??100)},this.direction=t.direction||Y.horizontal,this.transition=t.transition instanceof st?t.transition:this.initializeTransition(t.transition??{}),this.setStyles({display:"block",position:"relative",margin:"100px"}),this.index=0,this.open=!1,this.initEvents(),requestAnimationFrame((()=>{this.transition.apply(J.out,this.entries),this.snapTo(0)}))}initializeTransition(t){return t.properties||(t.properties="opacity transform"),null==t.duration&&(t.duration=.2),t.timingFunction||(t.timingFunction="ease-in-out"),rt(t)}reloadStyles(t=!1){const e=this.transition.getEnabledEntriesData();t&&e.forEach((t=>{const e=t.element[this.direction==Y.vertical?"offsetHeight":"offsetWidth"];this.sizePerEntry[t.elementIndex]?this.sizePerEntry[t.elementIndex]=e:this.sizePerEntry.push(e)}));const n=this.sizePerEntry[0],i=n/2,s=this.sizePerEntry[e.length-1],r=s/2;let o=Math.floor(this.index),l=-Math.abs(this.index-o)*this.sizePerEntry[this.flooredTrimmedIndex],a=l;for(;o>=e.length;)a-=n,o--;for(;o<0;)l+=s,o++;a<this.size.min+i&&(a=this.size.min+i),l>this.size.max+r&&(l=this.size.max+r),this.applyStyling(e[o].element,o==e.length-1?a:l,i,r);for(let t=o-1;t>=0;t--)a-=this.sizePerEntry[t],a<this.size.min+i&&(a=this.size.min+i),this.applyStyling(e[t].element,a,i,r);for(let t=o+1;t<e.length;t++)l+=this.sizePerEntry[t],l>this.size.max+r&&(l=this.size.max+r),this.applyStyling(e[t].element,l,i,r)}applyStyling(t,e,n=this.sizePerEntry[0]/2,i=this.sizePerEntry[this.sizePerEntry.length-1]/2){let s,r;e>0?(s=fe(e,0,this.size.max+i,this.opacity.max,this.opacity.min),r=fe(e,0,this.size.max+i,this.scale.max,this.scale.min)):(s=Math.abs(fe(e,0,this.size.min+n,this.opacity.max,this.opacity.min)),r=Math.abs(fe(e,0,this.size.min+n,this.scale.max,this.scale.min))),t.setStyles({opacity:s,transform:`translate3d(\n                        calc(${this.direction==Y.horizontal?e:0}px - 50%), \n                        calc(${this.direction==Y.vertical?e:0}px - 50%),\n                        0) scale3d(${r}, ${r}, 1)`})}set index(t){this.selectByIndex(this.trimmedIndex)}get trimmedIndex(){return se(Math.round(this.index),this.entries.length-1)}get flooredTrimmedIndex(){return se(Math.floor(this.index),this.entries.length-1)}set open(t){this.setStyle("overflow",t?"visible":"hidden")}onEntryClick(t,e){super.onEntryClick(t,e),e.stopImmediatePropagation(),this.open=!0,this.snapTo(this.entries.indexOf(t)),this.setOpenTimeout()}addEntry(t){return(t=super.addEntry(t)).setStyles({position:"absolute",left:"50%",top:"50%"}),t.addEventListener(xt.dragStart,(t=>{t.stopImmediatePropagation(),this.clearOpenTimeout(),this.open=!0,this.dragging=!0,this.transition.enabled=X.stylesOnly,this.reloadStyles(!0)})),this.transition&&(this.transition.attach(t),this.transition.apply(),this.reloadStyles(!0)),t}reset(){this.snapTo(0)}snapTo(t){this.index=t,this.transition.enabled=X.enabled,this.reloadStyles(!0);const e=getComputedStyle(this.selectedEntry);this.setStyles({minWidth:e.width,minHeight:e.height},!0)}clearOpenTimeout(){this.openTimeout&&clearTimeout(this.openTimeout)}setOpenTimeout(){this.clearOpenTimeout(),this.openTimeout=setTimeout((()=>this.open=!1),3e3)}initEvents(){const t=this.direction==Y.vertical?"y":"x";document.addEventListener(xt.drag,(e=>{this.dragging&&(e.stopImmediatePropagation(),this.index-=e.scaledDeltaPosition[t]/this.sizePerEntry[this.flooredTrimmedIndex],this.reloadStyles())})),document.addEventListener(xt.dragEnd,(t=>{this.dragging&&(t.stopImmediatePropagation(),this.dragging=!1,this.snapTo(this.trimmedIndex),this.setOpenTimeout())})),document.addEventListener(xt.click,(()=>this.open=!1))}};function ye(t){return new ge(t)}function Ee(t){if(!t)return NaN;const e=parseInt(t.substring(1),16);return.2126*((e>>16&255)/255)+.7152*((e>>8&255)/255)+.0722*((e>>0&255)/255)}function be(t,e){if(!t||!e)return NaN;const n=Ee(t),i=Ee(e);return(Math.max(n,i)+.1)/(Math.min(n,i)+.1)}function ve(t,e="#000000",n="#FFFFFF"){return be(t,n)>be(e,t)?n:e}function Se(t,...e){let n="";return t.forEach(((t,i)=>{n+=t+(e[i]||"")})),n}q([t()],ge.prototype,"index",null),q([t()],ge.prototype,"open",null),ge=q([a("turbo-select-wheel")],ge);const xe={900:{Black:"normal",BlackItalic:"italic"},800:{ExtraBold:"normal",ExtraBoldItalic:"italic"},700:{Bold:"normal",BoldItalic:"italic"},600:{SemiBold:"normal",SemiBoldItalic:"italic"},500:{Medium:"normal",MediumItalic:"italic"},400:{Regular:"normal",Italic:"italic"},300:{Light:"normal",LightItalic:"italic"},200:{ExtraLight:"normal",ExtraLightItalic:"italic"},100:{Thin:"normal",ThinItalic:"italic"}};function Te(t,e,n,i,s){return Se`
        @font-face {
            font-family: "${t}";
            src: local("${t}"), url("${e}") format("${n}");
            font-weight: "${i}";
            font-style: "${s}";
        }`}function we(t){t.name&&t.pathOrDirectory||console.error("Please specify font name and path/directory");const e=0==u(t.pathOrDirectory).length;t.stylesPerWeights||(t.stylesPerWeights=e?xe:{normal:"normal"}),t.format||(t.format="woff2"),t.extension||(t.extension=".ttf"),"."!=t.extension[0]&&(t.extension="."+t.extension),U(Object.entries(t.stylesPerWeights).map((([e,n])=>"string"==typeof n?Te(t.name,t.pathOrDirectory,t.format,e,n):Object.entries(n).map((([n,i])=>Te(t.name,`${t.pathOrDirectory}/${t.name}-${n}${t.extension}`,t.format,e,i))).join("\n"))).join("\n"))}export{Z as AccessLevel,wt as ActionMode,Mt as ClickMode,Tt as ClosestOrigin,xt as DefaultEventName,ft as Delegate,Y as Direction,J as InOut,Pt as InputDevice,me as MarkingMenu,g as MathMLNamespace,E as MathMLTagsDefinitions,Lt as Point,Yt as PopupFallbackMode,Q as Range,f as SvgNamespace,y as SvgTagsDefinitions,st as Transition,ot as TransitionHandler,X as TransitionMode,Rt as TurboButton,yt as TurboClickEventName,Dt as TurboDragEvent,bt as TurboDragEventName,ce as TurboDropdown,de as TurboDropdownEntry,lt as TurboElement,Ct as TurboEvent,_t as TurboEventManager,St as TurboEventName,Gt as TurboIcon,Ht as TurboIconToggle,Kt as TurboInput,At as TurboKeyEvent,gt as TurboKeyEventName,It as TurboMap,Et as TurboMoveName,qt as TurboNumericalInput,Zt as TurboPopup,le as TurboSelect,ee as TurboSelectEntry,ie as TurboSelectInputEvent,ge as TurboSelectWheel,Ot as TurboWheelEvent,vt as TurboWheelEventName,w as a,ht as addChildManipulationToElementPrototype,ct as addClassManipulationToElementPrototype,ut as addElementManipulationToElementPrototype,dt as addListenerManipulationToElementPrototype,pt as addStylesManipulationToElementPrototype,nt as areEqual,t as auto,ve as bestOverlayColor,x as blindElement,Bt as button,i as cache,e as callOnce,n as callOncePerInstance,d as camelToKebabCase,M as canvas,o as clearCache,l as clearCacheEntry,be as contrast,Se as css,a as define,P as div,ue as dropdown,pe as dropdownEntry,it as eachEqualToAny,S as element,Vt as fetchSvg,R as flexCol,B as flexColCenter,H as flexRow,W as flexRowCenter,k as form,T as generateTagFunction,u as getFileExtension,C as h1,L as h2,D as h3,A as h4,O as h5,F as h6,zt as icon,Wt as iconToggle,I as img,_ as input,v as isMathMLTag,tt as isNull,b as isSvgTag,et as isUndefined,p as kebabToCamelCase,fe as linearInterpolation,N as link,we as loadLocalFont,Ee as luminance,re as mod,Xt as numericalInput,m as observe,V as p,c as parse,Qt as popup,ae as select,ne as selectEntry,ye as selectWheel,Ft as setupTurboEventManagerBypassing,K as spacer,G as span,h as stringify,z as style,U as stylesheet,Nt as textToElement,j as textarea,rt as transition,se as trim,Ut as turboInput,mt as turbofy,at as updateChainingPropertiesInElementPrototype,$ as video};
