var Turbo=function(t){"use strict";function e(t){return function(e,n,i){const s=i?.get,r=i?.set;if(!r&&!t?.callBefore)return i;const o=Symbol(`__${String(n)}__`),l=function(){if(s){const e=s.call(this);if(t?.returnDefinedGetterValue)return e}return this[o]},a=function(e){0!=t?.cancelIfUnchanged&&e==this[o]||(t?.callBefore&&(e=function(){return t.callBefore.call(this,e)}.call(this)),this[o]=e,r&&r.call(this,e))};return i?(!t?.returnDefinedGetterValue&&s||(i.get=l),i.set=a):Object.defineProperty(e,n,{get:l,set:a,enumerable:!0,configurable:!0}),i}}function n(t,e,n=Object.getOwnPropertyDescriptor(t,e)){const i=n?.value;if(!i)throw new Error(`No method ${e} found on target`);const s=Symbol(`__callOnce__${e}`);return n.value=function(...t){if(!this[s])return this[s]=!0,i.apply(this,t);console.warn(`Function ${e} has already been called once on this instance and will not be called again.`)},n}function i(t,e=Symbol(`__callOncePerInstance__${t.name}`)){return function(...n){if(!this[e])return this[e]=!0,t.apply(this,n)}}function s(t={}){return function(e,n,s=Object.getOwnPropertyDescriptor(e,n)){const l=s?.value||s?.get;if(!l)throw new Error(`No method ${n} found on target`);const a=!!s.get,c=Symbol(`__cache__${n}`),u=Symbol(`__cache__setup__${n}`),h=[],d=function(t=!0){r.call(this,a,c,h,t)},p=i((function(i){!function(t,e,n,i,s){if(n.onEvent){const e="function"==typeof i.addEventListener?i:document;(Array.isArray(n.onEvent)?n.onEvent:n.onEvent.split(" ")).forEach((n=>e.addEventListener(n,(()=>s.call(t)))))}if(n.onFieldChange){(Array.isArray(n.onFieldChange)?n.onFieldChange:[n.onFieldChange]).forEach((n=>{"string"==typeof n?n.split(" ").forEach((n=>o(t,n,e,s))):o(t,n.name,e,s)}))}if(n.onCallback){const e=setInterval((()=>{const e=n.onCallback.call(t);e instanceof Promise?e.then((e=>s.call(t,e))):s.call(t,e)}),n.onCallbackFrequency||50);"function"==typeof i.addEventListener&&i.addEventListener("destroy",(()=>clearInterval(e)))}}(i,n,t,e,d)}),u);a?s.get=function(){return this[c]||(p.call(this,this),this[c]=l.apply(this),t.timeout&&h.push(setTimeout((()=>d.call(this)),t.timeout)),t.clearOnNextFrame&&requestAnimationFrame((()=>d.call(this)))),this[c]}:s.value=function(...e){this[c]||(this[c]=new Map,p.call(this,this));const n=0==e.length?"__no_args__":JSON.stringify(e.map((t=>"function"==typeof t?`function:${t.name}`:"object"==typeof t&&null!=t?JSON.stringify(Object.entries(t).sort()):null==t?"undefined":t)));if(this[c].has(n))return this[c].get(n);{const i=l.apply(this,e);return this[c].set(n,i),t.timeout&&h.push(setTimeout((()=>this[c].delete(n)),t.timeout)),t.clearOnNextFrame&&requestAnimationFrame((()=>d.call(this))),i}}}}function r(t,e,n,i){i&&(t?delete this[e]:this[e]?.clear(),n.forEach((t=>clearTimeout(t))),n.splice(0,n.length))}function o(t,e,n,i){const s=t[e];if(null!=s)if(console.log(s),"function"==typeof s)t[e]=function(...e){return i.call(t),s.apply(t,e)};else{const n=Object.getOwnPropertyDescriptor(t,e);console.log(n),Object.defineProperty(t,e,{get:()=>n?.get?.call(t)||t[s],set(e){i.call(t),n?.set?n.set.call(t,e):t[s]=e},configurable:!0,enumerable:!0})}else console.warn(`No method ${n} found on target. It will be ignored.`)}function l(t){for(const e of Object.getOwnPropertySymbols(t))e.toString().startsWith("Symbol(__cache__)")&&delete t[e]}const a=t=>e=>customElements.define(t,e);function c(t){if(null==t)return"";switch(typeof t){case"string":return t;case"number":case"boolean":case"bigint":case"symbol":case"function":return t.toString();case"object":if(Array.isArray(t))return JSON.stringify(t);if(t instanceof Date)return t.toISOString();try{return JSON.stringify(t)}catch{return"[object Object]"}default:return String(t)}}function u(t){switch(t){case"":return;case"null":return null;case"true":return!0;case"false":return!1}if(!isNaN(Number(t)))return Number(t);if(/^\d+n$/.test(t))return BigInt(t.slice(0,-1));if(t.startsWith("function")||t.startsWith("("))try{const e=new Function(`return (${t})`)();if("function"==typeof e)return e}catch{}try{const e=JSON.parse(t);if("object"==typeof e&&null!=e)return e}catch{}return t}function h(t){if(!t||0==t.length)return"";const e=t.match(/\.\S{1,4}$/);return e?e[0]:""}function d(t){if(t&&0!=t.length)return t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function p(t){if(t&&0!=t.length)return t.replace(/-([a-z])/g,(t=>t[1].toUpperCase()))}function m(t,e){let n=t.constructor;n.observedAttributes||(n.observedAttributes=[]);const i=d(e),s=Symbol(`__observed__${e}`);n.observedAttributes.push(i);let r=function(t,e){for(;t;){const n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Object.getPrototypeOf(t)}}(n.prototype,e)||{enumerable:!0,configurable:!0};Object.defineProperty(n.prototype,e,{get:r.get||function(){return this[s]},set:function(t){this[e]!==t&&(r.set?r.set.call(this,t):this[s]=t,"function"==typeof this.setAttribute&&this.setAttribute(i,c(this[s])))},enumerable:r.enumerable,configurable:r.configurable})}const f="http://www.w3.org/2000/svg",g="http://www.w3.org/1998/Math/MathML",y={a:SVGAElement,animate:SVGAnimateElement,animateMotion:SVGAnimateMotionElement,animateTransform:SVGAnimateTransformElement,circle:SVGCircleElement,clipPath:SVGClipPathElement,defs:SVGDefsElement,desc:SVGDescElement,ellipse:SVGEllipseElement,feBlend:SVGFEBlendElement,feColorMatrix:SVGFEColorMatrixElement,feComponentTransfer:SVGFEComponentTransferElement,feComposite:SVGFECompositeElement,feConvolveMatrix:SVGFEConvolveMatrixElement,feDiffuseLighting:SVGFEDiffuseLightingElement,feDisplacementMap:SVGFEDisplacementMapElement,feDistantLight:SVGFEDistantLightElement,feDropShadow:SVGFEDropShadowElement,feFlood:SVGFEFloodElement,feFuncA:SVGFEFuncAElement,feFuncB:SVGFEFuncBElement,feFuncG:SVGFEFuncGElement,feFuncR:SVGFEFuncRElement,feGaussianBlur:SVGFEGaussianBlurElement,feImage:SVGFEImageElement,feMerge:SVGFEMergeElement,feMergeNode:SVGFEMergeNodeElement,feMorphology:SVGFEMorphologyElement,feOffset:SVGFEOffsetElement,fePointLight:SVGFEPointLightElement,feSpecularLighting:SVGFESpecularLightingElement,feSpotLight:SVGFESpotLightElement,feTile:SVGFETileElement,feTurbulence:SVGFETurbulenceElement,filter:SVGFilterElement,foreignObject:SVGForeignObjectElement,g:SVGGElement,image:SVGImageElement,line:SVGLineElement,linearGradient:SVGLinearGradientElement,marker:SVGMarkerElement,mask:SVGMaskElement,metadata:SVGMetadataElement,mpath:SVGMPathElement,path:SVGPathElement,pattern:SVGPatternElement,polygon:SVGPolygonElement,polyline:SVGPolylineElement,radialGradient:SVGRadialGradientElement,rect:SVGRectElement,script:SVGScriptElement,set:SVGSetElement,stop:SVGStopElement,style:SVGStyleElement,svg:SVGSVGElement,switch:SVGSwitchElement,symbol:SVGSymbolElement,text:SVGTextElement,textPath:SVGTextPathElement,title:SVGTitleElement,tspan:SVGTSpanElement,use:SVGUseElement,view:SVGViewElement},b={annotation:MathMLElement,"annotation-xml":MathMLElement,maction:MathMLElement,math:MathMLElement,merror:MathMLElement,mfrac:MathMLElement,mi:MathMLElement,mmultiscripts:MathMLElement,mn:MathMLElement,mo:MathMLElement,mover:MathMLElement,mpadded:MathMLElement,mphantom:MathMLElement,mprescripts:MathMLElement,mroot:MathMLElement,mrow:MathMLElement,ms:MathMLElement,mspace:MathMLElement,msqrt:MathMLElement,mstyle:MathMLElement,msub:MathMLElement,msubsup:MathMLElement,msup:MathMLElement,mtable:MathMLElement,mtd:MathMLElement,mtext:MathMLElement,mtr:MathMLElement,munder:MathMLElement,munderover:MathMLElement,semantics:MathMLElement};function E(t){return Object.keys(y).includes(t)||t?.startsWith("svg")}function v(t){return Object.keys(b).includes(t)||t?.startsWith("math")}function S(t={}){let e;return e=t.namespace?"svg"==t.namespace?document.createElementNS(f,t.tag||"svg"):"mathML"==t.namespace?document.createElementNS(g,t.tag||"math"):document.createElementNS(t.namespace,t.tag||"div"):document.createElement(t.tag||"div"),t.shadowDOM&&e.attachShadow({mode:"open"}),e.setProperties(t),e}function T(t={}){return S({...t,tag:"img"})}function M(t={}){return S({...t,tag:"input"})}function x(t={}){return S({...t,tag:"style"})}function w(t){const e=S(t);return e.setStyles({display:"flex",flexDirection:"column"},!0),e}function P(t){const e=S(t);return e.setStyles({display:"flex",flexDirection:"row"},!0),e}function C(t,e=document.head){if(!t)return;const n=x({innerHTML:t});e.addChild(n)}function k(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}var D,I,L,O,A;function F(t){return null==t&&null!=t}function N(t,...e){if(e.length<1)return!0;for(const n of e){let e=!1;for(const i of t)n==i&&(e=!0);if(!e)return!1}return!0}"function"==typeof SuppressedError&&SuppressedError,t.TransitionMode=void 0,(D=t.TransitionMode||(t.TransitionMode={})).enabled="enabled",D.disabled="disabled",D.stylesOnly="stylesOnly",D.transitionOnly="transitionOnly",t.Direction=void 0,(I=t.Direction||(t.Direction={})).vertical="vertical",I.horizontal="horizontal",t.InOut=void 0,(L=t.InOut||(t.InOut={})).in="in",L.out="out",t.AccessLevel=void 0,(O=t.AccessLevel||(t.AccessLevel={})).public="public",O.protected="protected",O.private="private",t.Range=void 0,(A=t.Range||(t.Range={})).min="min",A.max="max";class _{inTransition;outTransition;attachedElements;beforeComputing;constructor(e={}){this.attachedElements=new Set,this.enabled=!0;for(const e of[t.InOut.in,t.InOut.out])this[`${e}Transition`]={properties:["all"],duration:0,delay:0,timingFunction:"linear"};this.update(e)}attach(...e){return e.forEach((e=>{this.findData(e)||(this.attachedElements.add({element:e,enabled:t.TransitionMode.enabled}),e.transitions.attach(this))})),this}detach(...t){return t.forEach((t=>{const e=this.findData(t);e&&(this.attachedElements.delete(e),t.transitions.detach(this))})),this}initialize(e=t.InOut.out,n,i=!1,s=!0,r,o=this.beforeComputing){return this.getEnabledEntriesData(n,i,s,o).forEach((t=>{t.lastState=e,this.resolveAndOverrideStyles(t,{[e]:r}),t.element.setStyles(t.resolvedStyles[e])})),this}apply(e=t.InOut.out,n,i=!1,s=!0,r,o=this.beforeComputing){return this.getEnabledEntriesData(n,i,s,o).forEach((t=>{t.lastState=e,this.resolveAndOverrideStyles(t,{[e]:r}),t.element.transitions.reload()})),this}toggle(e,n=!1,i=!0,s,r=this.beforeComputing){return this.getEnabledEntriesData(e,n,i,r).forEach((e=>{e.lastState||(e.lastState=this.stateOf(e.element)||t.InOut.out),e.lastState=e.lastState==t.InOut.out?t.InOut.in:t.InOut.out,this.resolveAndOverrideStyles(e,s),e.element.transitions.reload()})),this}getEnabledEntriesData(e,n=!1,i=!0,s=this.beforeComputing){if(this.enabled==t.TransitionMode.disabled)return console.warn("The transition you are trying to set on an element is disabled."),[];e?e instanceof HTMLCollection?e=Array.from(e):Array.isArray(e)||(e=[e]):e=[],0==e.length&&(n=!0),e.forEach((t=>this.attach(t))),n&&(e=[],this.attachedElements.forEach((t=>e.push(t.element))));const r=[];return e.forEach((e=>{if(e.transitions.enabled==t.TransitionMode.disabled)return void console.warn("The transition handler of the element you are trying to animate is disabled.");const n=this.findData(e);n.enabled!=t.TransitionMode.disabled?((i||null==n.elementIndex)&&(n.elementIndex=r.length),r.push(n)):console.warn("The transition you are trying to set on an element is disabled for this particular element.")})),r.forEach((t=>{(i||null==t.totalElementCount)&&(t.totalElementCount=r.length),s&&s(t.elementIndex,t.totalElementCount,t.element)})),r}reload(){return this.attachedElements.forEach((t=>t.element.transitions.reload())),this}reloadFor(e){if(this.enabled==t.TransitionMode.disabled||e.transitions.enabled==t.TransitionMode.disabled)return this;const n=this.findData(e);if(!n||n.enabled==t.TransitionMode.disabled)return this;const i=n.lastState,s=N([t.TransitionMode.enabled,t.TransitionMode.transitionOnly],this.enabled,e.transitions.enabled,n.enabled)&&(0!=this.duration[i]||0!=this.delay[i]),r=N([t.TransitionMode.enabled,t.TransitionMode.stylesOnly],this.enabled,e.transitions.enabled,n.enabled);return s&&e.appendStyle("transition",this.getTransitionString(n),", ",!0),r&&e.setStyles(n.resolvedStyles[i],!0),this}set enabled(t){this.reload()}get properties(){return this.inTransition.properties}set properties(t){t&&(t="string"==typeof t?t.split(" "):t,this.inTransition.properties=t,this.outTransition.properties=t)}get duration(){return this.getTransitionField("duration")}set duration(t){this.setTransitionField(t,"duration")}get timingFunction(){return this.getTransitionField("timingFunction")}set timingFunction(t){this.setTransitionField(t,"timingFunction")}get delay(){return this.getTransitionField("delay")}set delay(t){this.setTransitionField(t,"delay")}get defaultStyles(){return this.getTransitionField("defaultStyles")}set defaultStyles(t){this.setTransitionField(t,"defaultStyles")}get inTransitionString(){return this.getTransitionString({...this.attachedElements[0],lastState:t.InOut.in})}get outTransitionString(){return this.getTransitionString({...this.attachedElements[0],lastState:t.InOut.out})}update(t={}){if(t){t.beforeComputing&&(this.beforeComputing=t.beforeComputing);for(const[e,n]of Object.entries(t))this[e]=n}}enableTransitionFor(t,e){const n=this.findData(t);e=_.parseMode(e),n&&n.enabled!=e&&(n.enabled=e,t.transitions.reload())}getTransitionField(e){return{[t.InOut.in]:this.inTransition[e],[t.InOut.out]:this.outTransition[e]}}setTransitionField(e,n){if(null==e)return;const i="object"==typeof e&&("in"in e||"out"in e);[t.InOut.in,t.InOut.out].forEach((t=>this[`${t}Transition`][n]=i?e[t]:e))}findData(t){for(const e of this.attachedElements)if(e.element==t)return e;return null}stateOf(e){if(!e)return;const n=this.findData(e);if(n){if(n.lastState)return n.lastState;n.resolvedStyles||this.resolveAndOverrideStyles(n);for(const e of[t.InOut.in,t.InOut.out]){if(!n.resolvedStyles[e])continue;let t=!0;for(const[i,s]of Object.entries(n.resolvedStyles[e]))if(n.element.style[i]!=s){t=!1;break}if(t)return n.lastState=e,e}}}clone(){return new _({properties:this.properties,duration:this.duration,timingFunction:this.timingFunction,delay:this.delay,defaultStyles:this.defaultStyles})}getTransitionString(t){const e=this[`${t.lastState}Transition`],n="function"==typeof e.duration?e.duration(t.elementIndex,t.totalElementCount,t.element):e.duration,i="function"==typeof e.delay?e.delay(t.elementIndex,t.totalElementCount,t.element):e.delay;let s="";return this.properties.forEach((t=>s+=`, ${t} ${n}s ${e.timingFunction} ${i}s`)),s.substring(2)}resolveAndOverrideStyles(e,n){if(F(n))return void(e.resolvedStyles={});const i=this.defaultStyles;n=n||{},e.resolvedStyles||(e.resolvedStyles={}),[t.InOut.in,t.InOut.out].forEach((t=>{if(F(n[t]))return void(e.resolvedStyles[t]={});const s=n[t]??i[t];switch(e.resolvedStyles[t]={},typeof s){case"number":return void this.properties.forEach((n=>e.resolvedStyles[t][n]=s));case"string":const n=s.split(";").map((t=>t.split(":").map((t=>t.trim()))));return void(1==n.length&&1==n[0].length?this.properties.forEach((i=>e.resolvedStyles[t][i]=n[0][0])):n.forEach((([n,i])=>{n&&i&&(e.resolvedStyles[t][n]=i)})));case"object":for(const[n,i]of Object.entries(s))n&&null!=i&&(e.resolvedStyles[t][n]="function"==typeof i?i(e.elementIndex,e.totalElementCount):i);return;case"function":const i=s(e.elementIndex,e.totalElementCount,e.element);return void("string"==typeof i||"number"==typeof i?this.properties.forEach((n=>e.resolvedStyles[t][n]=i)):e.resolvedStyles[t]=i)}}))}static parseMode(e){return 1==e?t.TransitionMode.enabled:0==e?t.TransitionMode.disabled:e}}function V(t={}){return new _(t)}k([e({callBefore:_.parseMode})],_.prototype,"enabled",null);class G{attachedElement;transitions;constructor(t){this.attachedElement=t,this.transitions=new Set,this.enabled=!0}attach(...t){return t.forEach((t=>{this.transitions.has(t)||(this.transitions.add(t),t.attach(this.attachedElement))})),this}detach(...t){return t.forEach((t=>{this.transitions.has(t)&&(this.transitions.delete(t),t.detach(this.attachedElement))})),this}initialize(t,e,n,i=!1){return t.initialize(e,this.attachedElement,!1,i,n),this}apply(t,e,n,i=!1){return t.apply(e,this.attachedElement,!1,i,n),this}toggle(t,e,n=!1){return t.toggle(this.attachedElement,!1,n,e),this}clear(){this.attachedElement.style.transition=""}reload(){this.clear(),this.transitions.forEach((t=>t.reloadFor(this.attachedElement)))}set enabled(t){t?this.reload():this.clear()}enableTransition(t,e){t.enableTransitionFor(this.attachedElement,e)}}k([e({callBefore:t=>_.parseMode(t)})],G.prototype,"enabled",null);class z extends HTMLElement{constructor(t={}){super(),t.shadowDOM&&this.attachShadow({mode:"open"}),this.setProperties(t,!0)}attributeChangedCallback(t,e,n){n&&n!=e&&(this[p(t)]=u(n))}static config={shadowDOM:!1};static configure(t){Object.entries(t).forEach((([t,e])=>{void 0!==e&&(this.config[t]=e)}))}}function j(){const t=Element.prototype.setAttribute,e=Element.prototype.removeAttribute,n=HTMLElement.prototype.blur,i=HTMLElement.prototype.focus;Node.prototype.execute=function(t){return t(this),this},Element.prototype.setAttribute=function(e,n){return t.call(this,e,n?.toString()||"true"),this},Element.prototype.removeAttribute=function(t){return e.call(this,t),this},HTMLElement.prototype.blur=function(){return n.call(this),this},HTMLElement.prototype.focus=function(){return i.call(this),this}}function R(){const t=Node.prototype.removeChild,e=Element.prototype.remove,n=Element.prototype.closest;Object.defineProperty(Node.prototype,"childHandler",{get:function(){return this instanceof Element&&this.shadowRoot?this.shadowRoot:this},configurable:!1,enumerable:!0}),Object.defineProperty(Node.prototype,"childNodesArray",{get:function(){return Array.from(this.childHandler.childNodes)},configurable:!1,enumerable:!0}),Object.defineProperty(Node.prototype,"childrenArray",{get:function(){return this.childNodesArray.filter((t=>1===t.nodeType))},configurable:!1,enumerable:!0}),Object.defineProperty(Node.prototype,"siblingNodes",{get:function(){return this.parentNode?.childNodesArray||[]},configurable:!1,enumerable:!0}),Object.defineProperty(Node.prototype,"siblings",{get:function(){return this.parentElement?.childrenArray},configurable:!1,enumerable:!0}),Node.prototype.remove=function(){return this.parentNode?.removeChild(this),this},Element.prototype.remove=function(){return e.call(this),this},Node.prototype.addChild=function(t,e,n=this.childrenArray){if(!this||!t)return this;if(void 0!==e&&(e<0||e>n.length)&&(e=void 0),null!=e)this.addChildBefore(t,n[e]);else try{Array.isArray(t)||(t=[t]),t.forEach((t=>{this.childHandler.appendChild(t),t.__outName&&!this[t.__outName]&&(this[t.__outName]=t)}))}catch(t){console.error(t)}return this},Node.prototype.removeChild=function(e){if(!this||!e)return this;try{Array.isArray(e)?e.forEach((e=>t.call(this.childHandler,e))):t.call(this.childHandler,e)}catch(t){console.error(t)}return this},Node.prototype.addChildBefore=function(t,e){if(!this||!t)return this;if(!e)return this.addChild(t);try{Array.isArray(t)?t.forEach((t=>this.childHandler.insertBefore(t,e))):this.childHandler.insertBefore(t,e)}catch(t){console.error(t)}return this},Node.prototype.removeChildAt=function(t,e=1,n=this.childrenArray){if(!this||void 0===t||t<0)return this;if(t>=n.length)return this;try{for(let i=t+e-1;i>=t;i--)i>=n.length||this.removeChild(n[i])}catch(t){console.error(t)}return this},Node.prototype.removeAllChildren=function(t=this.childrenArray){if(!this)return this;try{for(let e=0;e<t.length;e++)this.removeChild(t[e])}catch(t){console.error(t)}return this},Node.prototype.childAt=function(t,e=this.childrenArray){if(!this||void 0===t)return null;for(t>=e.length&&(t=e.length-1);t<0;)t+=e.length;return e[t]},Node.prototype.indexOfChild=function(t,e=this.childrenArray){return this&&t?(e instanceof Array||(e=Array.from(e)),e.indexOf(t)):-1},Node.prototype.hasChild=function(t){if(!this||!t)return!1;const e=Array.from(this.childNodes);if(t instanceof Node)return e.includes(t);for(const n of t)if(!e.includes(n))return!1;return!0},Element.prototype.closest=function(t){if(!this||!t)return null;if("string"==typeof t)return n.call(this,t);if("function"==typeof t){let e=this;for(;e&&!(e instanceof t);)e=e.parentElement;return e||null}return null},Node.prototype.findInParents=function(t){if(!t)return!1;t instanceof Node&&(t=[t]);let e=this,n=0;for(;e&&n<t.length;)t.includes(e)&&n++,e=e.parentNode;return n===t.length},Node.prototype.findInSubTree=function(t){if(!t)return!1;t instanceof Node&&(t=[t]);let e=0;const n=i=>{t.includes(i)&&e++,e>=t.length||i.childNodes.forEach((t=>n(t)))};return n(this),e>=t.length},Node.prototype.indexInParent=function(t=this.siblings){return t?t.indexOf(this):-1}}function B(){function t(t,e,n=(()=>{})){if(!t||!e)return t;try{"string"==typeof e&&(e=e.split(" ")),e.filter((t=>t.trim().length>0)).forEach((t=>n(t)))}catch(t){console.error(t)}return t}Element.prototype.addClass=function(e){return t(this,e,(t=>this.classList.add(t)))},Element.prototype.removeClass=function(e){return t(this,e,(t=>this.classList.remove(t)))},Element.prototype.toggleClass=function(e,n){return t(this,e,(t=>this.classList.toggle(t,n)))},Element.prototype.hasClass=function(t){if(!this||!t)return!1;if("string"==typeof t)return this.classList.contains(t);for(let e of t)if(!this.classList.contains(e))return!1;return!0}}function $(){Element.prototype.setProperties=function(t={},e=!1){return this?(t.out&&("string"==typeof t.out?this.__outName=t.out:Object.assign(t.out,this)),Object.keys(t).forEach((n=>{switch(n){case"tag":case"namespace":case"shadowDOM":return;case"text":if(!(this instanceof HTMLElement))return;return void(this.innerText=t.text);case"style":if(!(this instanceof HTMLElement||this instanceof SVGElement))return;return void(this.style.cssText+=t.style);case"stylesheet":return void C(t.stylesheet,this.closestRoot);case"id":return void(this.id=t.id);case"classes":return void this.addClass(t.classes);case"listeners":return void Object.keys(t.listeners).forEach((e=>this.addListener(e,t.listeners[e],this)));case"children":return void this.addChild(t.children);case"parent":if(!t.parent)return;return void t.parent.addChild(this);default:if(e)return;try{this[n]=t[n]}catch(t){console.error(t)}return}})),this):this},Node.prototype.destroy=function(){return this.removeAllListeners(),this.remove(),this}}function W(){Object.defineProperty(Node.prototype,"boundListeners",{value:new Set,writable:!1,configurable:!0,enumerable:!0}),Node.prototype.addListener=function(t,e,n=this,i){const s=t=>{"object"==typeof e&&e.handleEvent&&e.handleEvent(t),"function"==typeof e&&e(t,this)};return n.boundListeners.add({target:this,type:t,originalListener:e,listener:s,options:i}),this.addEventListener(t,s,i),this},Node.prototype.removeListener=function(t,e,n){for(let i of this.boundListeners)if(i.type===t&&i.originalListener===e&&i.options===n){i.target.removeEventListener(t,i.listener,n),this.boundListeners.delete(i);break}return this},Node.prototype.removeListenersByType=function(t){for(let e of this.boundListeners)e.type===t&&(this.removeEventListener(t,e.listener,e.options),this.boundListeners.delete(e));return this},Node.prototype.removeAllListeners=function(){for(let t of this.boundListeners)this.removeEventListener(t.type,t.listener,t.options),this.boundListeners.delete(t);return this}}function H(){const e=new _({properties:"visibility",defaultStyles:{in:"visible",out:"hidden"}});Object.defineProperty(Node.prototype,"closestRoot",{get:function(){let t=this;for(;t;){if(t instanceof Element&&t.shadowRoot)return t.shadowRoot;t=t.parentElement}return document.head},configurable:!1,enumerable:!0}),Object.defineProperty(HTMLElement.prototype,"transitions",{get:function(){return this._transitions||(this._transitions=new G(this)),this._transitions},configurable:!1,enumerable:!0}),Object.defineProperty(HTMLElement.prototype,"showTransition",{value:e,writable:!0,configurable:!0,enumerable:!0}),Object.defineProperty(HTMLElement.prototype,"isShown",{get:function(){const e=this.showTransition.stateOf(this);return e==t.InOut.in||e!=t.InOut.out&&("none"!=this.style.display&&"hidden"!=this.style.visibility&&"0"!=this.style.opacity)},configurable:!1,enumerable:!0}),HTMLElement.prototype.setStyle=function(t,e,n=!1){return t&&null!=e?(this.pendingStyles||(this.pendingStyles={}),n?this.style[t]=e.toString():this.pendingStyles[t]=e.toString(),n||this.applyStyles(),this):this},HTMLElement.prototype.appendStyle=function(t,e,n=", ",i=!1){if(!t||null==e)return this;this.pendingStyles||(this.pendingStyles={});const s=this.style[t]||"";return n=s.length>0?n:"",i?this.style[t]=s+n+e:this.pendingStyles[t]=s+n+e,i||this.applyStyles(),this},HTMLElement.prototype.setStyles=function(t,e=!1){if(!t||"number"==typeof t)return this;if(this.pendingStyles||(this.pendingStyles={}),"string"==typeof t)t.split(";").forEach((t=>{const[n,i]=t.split(":").map((t=>t.trim()));n&&i&&(e?this.style[n]=i:this.pendingStyles[n]=i)}));else for(const[n,i]of Object.entries(t))e?this.style[n]=i.toString():this.pendingStyles[n]=i.toString();return e||this.applyStyles(),this},HTMLElement.prototype.applyStyles=function(){requestAnimationFrame((()=>{for(const t in this.pendingStyles)"cssText"==t?this.style.cssText+=";"+this.pendingStyles.cssText:this.style[t]=this.pendingStyles[t];this.pendingStyles={}}))},HTMLElement.prototype.show=function(e){return this.showTransition.apply(e?t.InOut.in:t.InOut.out,this),this}}class K{callbacks=new Set;add(t){this.callbacks.add(t)}remove(t){return this.callbacks.delete(t)}fire(...t){for(const e of this.callbacks)try{e(...t)}catch(t){console.error("Error invoking callback:",t)}}clear(){this.callbacks.clear()}}const U={keyPressed:"turbo-key-pressed",keyReleased:"turbo-key-released"},q={click:"turbo-click",clickStart:"turbo-click-start",clickEnd:"turbo-click-end",longPress:"turbo-long-press"},X={move:"turbo-move"},Y={drag:"turbo-drag",dragStart:"turbo-drag-start",dragEnd:"turbo-drag-end"},J={trackpadScroll:"turbo-trackpad-scroll",trackpadPinch:"turbo-trackpad-pinch",mouseWheel:"turbo-mouse-wheel"},Z={...q,...U,...X,...Y,...J,selectInput:"turbo-select-input"},Q={keyPressed:"keydown",keyReleased:"keyup",click:"click",clickStart:"mousedown",clickEnd:"mouseup",longPress:Z.longPress,move:"mousemove",drag:Z.drag,dragStart:Z.dragStart,dragEnd:Z.dragEnd,wheel:"wheel",trackpadScroll:"wheel",trackpadPinch:"wheel",mouseWheel:"wheel",scroll:"scroll",input:"input",change:"change",focus:"focus",blur:"blur"};var tt,et,nt,it,st;t.ClosestOrigin=void 0,(tt=t.ClosestOrigin||(t.ClosestOrigin={})).target="target",tt.position="position";class rt extends Event{clickMode;keys;position;constructor(t,e,n,i,s){super(i,{bubbles:!0,cancelable:!0,...s}),this.clickMode=e,this.keys=n,this.position=t}closest(e,n=!0,i=t.ClosestOrigin.target){const s=i==t.ClosestOrigin.target?[this.target]:document.elementsFromPoint(this.position.x,this.position.y);for(let t of s){for(;t&&(!(t instanceof e)||n&&!this.isPositionInsideElement(this.position,t));)t=t.parentElement;if(t)return t}return null}isPositionInsideElement(t,e){const n=e.getBoundingClientRect();return t.x>=n.left&&t.x<=n.right&&t.y>=n.top&&t.y<=n.bottom}get target(){return super.target||document}get scaledPosition(){return this.authorizeScaling()?this.scalePosition(this.position):this.position}scalePosition(t){return t}authorizeScaling(){return!0}scalePositionsMap(t){return t.mapValues(((t,e)=>this.scalePosition(e)))}}k([s()],rt.prototype,"closest",null),k([s()],rt.prototype,"scaledPosition",null);class ot{x;y;constructor(t=0,e=("number"==typeof t?t:0)){"number"==typeof t?(this.x=t,this.y=e):"clientX"in t?(this.x=t.clientX,this.y=t.clientY):"x"in t?(this.x=t.x,this.y=t.y):(this.x=t[0],this.y=t[1])}static dist(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static midPoint(...t){if(0==t.length)return null;const e=t.reduce(((t,e)=>t+e.x),0)/t.length,n=t.reduce(((t,e)=>t+e.y),0)/t.length;return new ot(e,n)}static max(...t){if(0==t.length)return null;const e=t.reduce(((t,e)=>Math.max(t,e.x)),-1/0),n=t.reduce(((t,e)=>Math.max(t,e.y)),-1/0);return new ot(e,n)}static min(...t){if(0==t.length)return null;const e=t.reduce(((t,e)=>Math.min(t,e.x)),1/0),n=t.reduce(((t,e)=>Math.min(t,e.y)),1/0);return new ot(e,n)}equals(t,e=0){return"number"==typeof t?this.x==t&&this.y==e:this.x==t.x&&this.y==t.y}boundX(t,e){return this.x<t?t:this.x>e?e:this.x}boundY(t,e){return this.y<t?t:this.y>e?e:this.y}bound(t,e,n=t,i=e){return new ot(this.boundX(t,e),this.boundY(n,i))}add(t,e){return"number"==typeof t?new ot(this.x+t,this.y+(e||0==e?e:t)):new ot(this.x+t.x,this.y+t.y)}sub(t,e){return"number"==typeof t?new ot(this.x-t,this.y-(e||0==e?e:t)):new ot(this.x-t.x,this.y-t.y)}mul(t,e){return"number"==typeof t?new ot(this.x*t,this.y*(e||0==e?e:t)):new ot(this.x*t.x,this.y*t.y)}div(t,e){return"number"==typeof t?new ot(this.x/t,this.y/(e||0==e?e:t)):new ot(this.x/t.x,this.y/t.y)}abs(){return new ot(Math.abs(this.x),Math.abs(this.y))}max(){return Math.max(this.x,this.y)}min(){return Math.min(this.x,this.y)}copy(){return new ot(this.x,this.y)}arr(){return[this.x,this.y]}}class lt extends rt{origins;previousPositions;positions;constructor(t,e,n,i,s,r=Z.drag,o){super(n.first,i,s,r,{bubbles:!0,cancelable:!0,...o}),this.origins=t,this.previousPositions=e,this.positions=n}get scaledOrigins(){return this.authorizeScaling()?this.scalePositionsMap(this.origins):this.origins}get scaledPreviousPositions(){return this.authorizeScaling()?this.scalePositionsMap(this.previousPositions):this.previousPositions}get scaledPositions(){return this.authorizeScaling()?this.scalePositionsMap(this.positions):this.positions}get deltaPositions(){return this.positions.mapValues(((t,e)=>{const n=this.previousPositions.get(t);if(n)return e.sub(n)}))}get deltaPosition(){return ot.midPoint(...this.deltaPositions.valuesArray())}get scaledDeltaPositions(){return this.scaledPositions.mapValues(((t,e)=>{const n=this.scaledPreviousPositions.get(t);if(n)return e.sub(n)}))}get scaledDeltaPosition(){return ot.midPoint(...this.scaledDeltaPositions.valuesArray())}}k([s()],lt.prototype,"scaledOrigins",null),k([s()],lt.prototype,"scaledPreviousPositions",null),k([s()],lt.prototype,"scaledPositions",null),k([s()],lt.prototype,"deltaPositions",null),k([s()],lt.prototype,"deltaPosition",null),k([s()],lt.prototype,"scaledDeltaPositions",null),k([s()],lt.prototype,"scaledDeltaPosition",null);class at extends rt{keyPressed;keyReleased;constructor(t,e,n,i,s=Z.keyPressed,r){super(null,n,i,s,{bubbles:!0,cancelable:!0,...r}),this.keyPressed=t,this.keyReleased=e}}t.ActionMode=void 0,(et=t.ActionMode||(t.ActionMode={}))[et.none=0]="none",et[et.click=1]="click",et[et.longPress=2]="longPress",et[et.drag=3]="drag",t.ClickMode=void 0,(nt=t.ClickMode||(t.ClickMode={}))[nt.none=0]="none",nt[nt.left=1]="left",nt[nt.right=2]="right",nt[nt.middle=3]="middle",nt[nt.other=4]="other",nt[nt.key=5]="key",t.InputDevice=void 0,(it=t.InputDevice||(t.InputDevice={}))[it.unknown=0]="unknown",it[it.mouse=1]="mouse",it[it.trackpad=2]="trackpad",it[it.touch=3]="touch";class ct extends rt{delta;constructor(e,n,i,s){super(null,t.ClickMode.none,n,i,{bubbles:!0,cancelable:!0,...s}),this.delta=e}}function ut(t){HTMLElement.prototype.bypassTurboEventManagerOn=t=>!0;const e=function(e){const n=this.bypassTurboEventManagerOn(e);"boolean"==typeof n?t.setLockState(this,{enabled:n,preventDefaultWheel:n,preventDefaultMouse:n,preventDefaultTouch:n}):t.setLockState(this,{enabled:n.enabled||!1,preventDefaultWheel:n.preventDefaultWheel||!1,preventDefaultMouse:n.preventDefaultMouse||!1,preventDefaultTouch:n.preventDefaultTouch||!1})};HTMLElement.prototype.bypassTurboEventManager=function(){return this.addListener("mousedown",(t=>e.call(this,t))),this.addListener("touchstart",(t=>e.call(this,t))),this},n(HTMLElement.prototype,"bypassTurboEventManager")}class ht extends Map{enforceImmutability=!0;set(t,e){return super.set(t,this.enforceImmutability?this.copy(e):e)}get(t){const e=super.get(t);return this.enforceImmutability?this.copy(e):e}get first(){if(0==this.size)return null;const t=this.values().next().value;return this.enforceImmutability?this.copy(t):t}get last(){if(0==this.size)return null;const t=this.valuesArray()[this.size-1];return this.enforceImmutability?this.copy(t):t}keysArray(){return Array.from(this.keys())}valuesArray(){return Array.from(this.values())}copy(t){if(t&&"object"==typeof t){if(t instanceof Array)return t.map((t=>this.copy(t)));if(t.constructor&&t.constructor!=Object){if("function"==typeof t.clone)return t.clone();if("function"==typeof t.copy)return t.copy()}return{...t}}return t}mapKeys(t){const e=new ht;for(let[n,i]of this)e.set(t(n,i),i);return e}mapValues(t){const e=new ht;for(let[n,i]of this)e.set(n,t(n,i));return e}filter(t){const e=new ht;for(let[n,i]of this)t(n,i)&&e.set(n,i);return e}merge(t){for(let[e,n]of t)this.set(e,n);return this}}function dt(t){let e=document.createElement("div");return e.innerHTML=t,e.children[0]}function pt(t){return new Promise(((e,n)=>{t&&0!==t.length?fetch(t).then((t=>{if(!t.ok)throw new Error("Network response was not ok while loading your SVG");return t.text()})).then((t=>{const n=dt(t);if(!n)throw new Error("Error parsing SVG text");e(n)})).catch((t=>{console.error("Error fetching SVG:",t),n(t)})):n(new Error("Invalid path"))}))}function mt(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}t.TurboIcon=class extends z{static{st=this}_element=null;_type;_directory;_icon;_iconColor=null;_onLoaded=null;static config={defaultType:"svg",defaultDirectory:""};constructor(t){super(t),this.update(t)}update(t){t.unsetDefaultClasses?this.removeClass(st.config.defaultClasses):this.addClass(st.config.defaultClasses),this.type=t.type,this.directory=t.directory,t.iconColor&&(this.iconColor=t.iconColor),t.onLoaded&&(this._onLoaded=t.onLoaded),this.icon=t.icon}fetchSvg(t){return pt(t)}generateSvg(){this.clear(),this.fetchSvg(this.path).then((t=>{this.element||(this.element=t,this.addChild(this.element),this.element&&(this.iconColor&&(this.element.style.fill=this.iconColor),this._onLoaded&&this._onLoaded(this.element)))}))}generateImg(){if(this.element instanceof HTMLImageElement)return this.element.src=this.path,void(this.element.alt=this.icon);this.clear(),this.element=T({src:this.path,alt:this.icon,parent:this})}clear(){this.removeAllChildren(),this.element=null}get type(){return this._type}set type(t){t&&0!=t.length||(t=this.type||st.config.defaultType||"svg"),this._type=t}get directory(){return this._directory}set directory(t){t||(t=this.directory||st.config.defaultDirectory||""),t.length>0&&!t.endsWith("/")&&(t+="/"),this._directory=t}get path(){let t=this.icon.endsWith("."+this.type)||0==this.type.length?"":"."+this.type;return this.directory+this.icon+t}get icon(){return this._icon}set icon(t){this.type=h(t).substring(1),this._icon=t,"svg"==this.type?this.generateSvg():this.generateImg()}get iconColor(){return this._iconColor}set iconColor(t){this._iconColor=t,this.element instanceof SVGElement&&t&&(this.element.style.fill=t)}set element(t){this._element=t}get element(){return this._element}},k([s()],t.TurboIcon.prototype,"fetchSvg",null),k([m],t.TurboIcon.prototype,"icon",null),k([m],t.TurboIcon.prototype,"iconColor",null),t.TurboIcon=st=k([a("turbo-icon")],t.TurboIcon);var ft,gt,yt,bt,Et;function vt(e){return new t.TurboButton(e)}function St(e={}){return new t.TurboPopup(e)}function Tt(e){return new t.TurboSelectEntry(e)}mt("turbo-button{align-items:center;background-color:#dadada;border:1px solid #000;border-radius:.4em;color:#000;display:inline-flex;flex-direction:row;gap:.4em;padding:.5em .7em;text-decoration:none}turbo-button>h4{flex-grow:1}"),t.TurboButton=class extends z{static{ft=this}elements;_buttonTextTag;static config={defaultTextTag:"h4"};constructor(t){super(t),this.elements={leftCustomElements:null,leftIcon:null,buttonText:null,rightIcon:null,rightCustomElements:null},this.buttonTextTag=t.customTextTag,t.unsetDefaultClasses||this.addClass(ft.config.defaultClasses),t.leftCustomElements&&(this.leftCustomElements=t.leftCustomElements),t.leftIcon&&(this.leftIcon=t.leftIcon),t.buttonText&&(this.buttonText=t.buttonText),t.rightIcon&&(this.rightIcon=t.rightIcon),t.rightCustomElements&&(this.rightCustomElements=t.rightCustomElements)}addAtPosition(t,e){if(!t)return;let n=0;for(let t in this.elements){if(t==e)break;this.elements[t]&&n++}this.addChild(t,n)}removeElement(t){t&&(Array.isArray(t)?t.forEach((t=>this.removeChild(t))):this.removeChild(t))}get buttonTextTag(){return this._buttonTextTag}set buttonTextTag(t){t||(t=ft.config.defaultTextTag||"h4"),this._buttonTextTag=t}get leftCustomElements(){return this.elements.leftCustomElements}set leftCustomElements(t){this.addAtPosition(t,"leftCustomElements"),this.removeElement(this.leftCustomElements),this.elements.leftCustomElements=t}get leftIcon(){return this.elements.leftIcon}set leftIcon(e){"string"==typeof e&&(e=new t.TurboIcon({icon:e})),this.addAtPosition(e,"leftIcon"),this.removeElement(this.leftIcon),this.elements.leftIcon=e}get buttonText(){return this.elements.buttonText}set buttonText(t){if("string"==typeof t){if(this.buttonText&&"innerText"in this.buttonText)return void(this.buttonText.innerText=t);t=S({tag:this.buttonTextTag,text:t})}this.addAtPosition(t,"buttonText"),this.removeElement(this.buttonText),this.elements.buttonText=t}get rightIcon(){return this.elements.rightIcon}set rightIcon(e){"string"==typeof e&&(e=new t.TurboIcon({icon:e})),this.addAtPosition(e,"rightIcon"),this.removeElement(this.rightIcon),this.elements.rightIcon=e}get rightCustomElements(){return this.elements.rightCustomElements}set rightCustomElements(t){this.addAtPosition(t,"rightCustomElements"),this.removeElement(this.rightCustomElements),this.elements.rightCustomElements=t}},t.TurboButton=ft=k([a("turbo-button")],t.TurboButton),t.TurboIconToggle=class extends t.TurboIcon{_toggled=!1;onToggle;constructor(t){super(t),this.toggled=t.toggled,this.onToggle=t.onToggle}get toggled(){return this._toggled}set toggled(t){this._toggled=t,this.onToggle&&this.onToggle(t,this)}toggle(){this.toggled=!this.toggled}},t.TurboIconToggle=k([a("turbo-icon-toggle")],t.TurboIconToggle),t.TurboInput=class extends z{inputElement;labelElement;prefixElement;suffixElement;locked;constructor(t={}){super(t),this.locked=t.locked||!1,t.label&&(this.labelElement=S({tag:"label",text:t.label,parent:this}));const e=S({parent:this});t.prefix&&(this.prefixElement=S({tag:"span",text:t.prefix,parent:e})),this.inputElement=S({...t.inputProperties,tag:t.inputTag,parent:e}),t.suffix&&(this.suffixElement=S({tag:"span",text:t.suffix,parent:e})),this.setupEvents(t)}setupEvents(t){"bypassTurboEventManager"in this.inputElement&&this.inputElement.bypassTurboEventManager(),t.onClick&&this.inputElement.addEventListener(Q.click,(e=>t.onClick(e))),t.onBlur&&this.inputElement.addEventListener(Q.blur,(e=>t.onBlur(e))),this.inputElement.addEventListener(Q.focus,(()=>{this.locked&&this.inputElement.blur(),t.selectTextOnFocus&&this.inputElement.select()})),this.inputElement.addEventListener(Q.input,(e=>{if(t.dynamicVerticalResize&&(this.inputElement.style.height="",this.inputElement.style.height=this.inputElement.scrollHeight+"px"),t.regexCheck){const e=t.regexCheck instanceof RegExp?t.regexCheck:new RegExp(t.regexCheck,"g");this.value=this.value.toString().replace(e,"")}else this.value=this.value;t.onInput&&t.onInput(e)}))}get value(){return this.inputElement.value}set value(t){this.inputElement.value=t.toString()}},t.TurboInput=k([a("turbo-input")],t.TurboInput),t.TurboNumericalInput=class extends t.TurboInput{multiplier;decimalPlaces;min;max;constructor(t={}){t.regexCheck=/^(?!-0?(\.0+)?$)-?(0|[1-9]\d*)?(\.\d+)?(?<=\d)$/,super(t),this.multiplier=t.multiplier||1,this.decimalPlaces=t.decimalPlaces,this.min=t.min,this.max=t.max}get value(){return Number.parseFloat(this.inputElement.value)/this.multiplier}set value(t){t&&""!=t||(t=0),"string"==typeof t&&(t=Number.parseFloat(t)),t*=this.multiplier,null!=this.min&&t<this.min&&(t=this.min),null!=this.max&&t>this.max&&(t=this.max),null!=this.decimalPlaces&&(t=Math.round(t*Math.pow(10,this.decimalPlaces))/Math.pow(10,this.decimalPlaces)),this.inputElement.value=t.toString()}},t.TurboNumericalInput=k([a("turbo-numerical-input")],t.TurboNumericalInput),t.PopupFallbackMode=void 0,(gt=t.PopupFallbackMode||(t.PopupFallbackMode={})).invert="invert",gt.offset="offset",gt.none="none",t.TurboPopup=class extends z{static{yt=this}_popupAnchor;_parentAnchor;_viewportMargin;_offsetFromParent;fallbackModes;static config={defaultPopupAnchor:{x:0,y:-100},defaultParentAnchor:{x:0,y:100},defaultViewportMargin:4,defaultOffsetFromParent:{x:0,y:4}};constructor(e={}){super(e),this.setStyle("position","fixed"),e.unsetDefaultClasses||this.addClass(yt.config.defaultClasses),this.popupAnchor=e.popupAnchor||yt.config.defaultPopupAnchor||{x:50,y:0},this.parentAnchor=e.parentAnchor||yt.config.defaultParentAnchor||{x:50,y:100},this.viewportMargin=e.viewportMargin||yt.config.defaultViewportMargin||0,this.offsetFromParent=e.offsetFromParent||yt.config.defaultOffsetFromParent||0,this.fallbackModes=e.fallbackModes||{x:Math.abs(this.parentAnchor.x-50)>25?t.PopupFallbackMode.invert:t.PopupFallbackMode.offset,y:Math.abs(this.parentAnchor.y-50)>25?t.PopupFallbackMode.invert:t.PopupFallbackMode.offset},this.addListeners(),this.show(!1)}addListeners(){document.addEventListener(Q.scroll,(()=>this.show(!1))),document.addEventListener(Q.click,(t=>{this.isShown&&!this.contains(t.target)&&this.show(!1)}))}get popupAnchor(){return this._popupAnchor}set popupAnchor(t){this._popupAnchor=new ot(t).bound(0,100)}get parentAnchor(){return this._parentAnchor}set parentAnchor(t){this._parentAnchor=new ot(t).bound(0,100)}get viewportMargin(){return this._viewportMargin}set viewportMargin(t){this._viewportMargin=new ot(t)}get offsetFromParent(){return this._offsetFromParent}set offsetFromParent(t){this._offsetFromParent=new ot(t)}get rect(){return this.getBoundingClientRect()}get parentRect(){return this.parentElement.getBoundingClientRect()}get computedStyle(){return window.getComputedStyle(this)}get parentComputedStyle(){return window.getComputedStyle(this.parentElement)}recomputePosition(){if(!this.parentElement)return;const e=this.recomputeSide(t.Direction.vertical),n=this.recomputeSide(t.Direction.horizontal);this.recomputeMaxSize(e,t.Direction.vertical),this.recomputeMaxSize(n,t.Direction.horizontal)}recomputeSide(e){const n=this.generateDimensionParameters(e),i=this.rect[n.size]+this.offsetFromParent[n.coordinate]+parseFloat(this.computedStyle[n.marginStart])+parseFloat(this.computedStyle[n.marginEnd]),s=this.parentRect[n.size]*this.parentAnchor[n.coordinate]/100,r=i*this.popupAnchor[n.coordinate]/100,o=s-r,l=o>0?1:-1,a=this.offsetFromParent[n.coordinate]*l,c=this.viewportMargin[n.coordinate]*l,u=o+c;let h=this.parentRect[n.side]+o+a;if(this.fallbackModes[n.coordinate]==t.PopupFallbackMode.invert){const t=this.parentRect[n.size]-s+(i-r),e=t-c;(o>=0&&window[n.innerSize]-this.parentRect[n.side]<i+u&&this.parentRect[n.side]>=i-e||o<0&&this.parentRect[n.side]<-o-u&&window[n.innerSize]-this.parentRect[n.side]>=t+e)&&(h=this.parentRect[n.side]-t*l)}else if(this.fallbackModes[n.coordinate]==t.PopupFallbackMode.offset)if(o<0){const t=this.parentRect[n.side]+u;t<0&&(h-=t)}else{const t=window[n.innerSize]-this.parentRect[n.side]-(i+u);t>0&&(h-=t)}return this.style[n.side]=h+"px",h}recomputeMaxSize(t,e){const n=this.generateDimensionParameters(e),i=window[n.innerSize]-t-this.viewportMargin[n.coordinate]-parseFloat(this.computedStyle[n.marginStart])-parseFloat(this.computedStyle[n.marginEnd])-parseFloat(this.parentComputedStyle[n.marginStart])-parseFloat(this.parentComputedStyle[n.marginEnd]);this.computedStyle[n.maxSize]&&parseFloat(this.computedStyle[n.maxSize])<=i||(this.style[n.maxSize]=i+"px")}clearMaxDimensions(){this.style.maxHeight="",this.style.maxWidth=""}show(t){return this.isShown==t||requestAnimationFrame((()=>{t?this.recomputePosition():this.clearMaxDimensions(),super.show(t)})),this}toggle(){return this.show(!this.isShown)}generateDimensionParameters(e){const n=e==t.Direction.vertical;return{size:n?"height":"width",innerSize:n?"innerHeight":"innerWidth",maxSize:n?"maxHeight":"maxWidth",marginStart:n?"marginTop":"marginLeft",marginEnd:n?"marginBottom":"marginRight",side:n?"top":"left",coordinate:n?"y":"x"}}},k([s({clearOnNextFrame:!0})],t.TurboPopup.prototype,"rect",null),k([s({clearOnNextFrame:!0})],t.TurboPopup.prototype,"parentRect",null),k([s({clearOnNextFrame:!0})],t.TurboPopup.prototype,"computedStyle",null),k([s({clearOnNextFrame:!0})],t.TurboPopup.prototype,"parentComputedStyle",null),t.TurboPopup=yt=k([a("turbo-popup")],t.TurboPopup),t.TurboSelectEntry=bt=class extends z{_value;_selected;_enabled;selectedClasses="";onSelected;onEnabled;reflectedElement;inputElement;config={};constructor(t){super(t),t.unsetDefaultClasses||this.addClass(bt.config.defaultClasses),this.selectedClasses=t.selectedClasses,this.onSelected=t.onSelected||(()=>{}),this.onEnabled=t.onEnabled||(()=>{}),this.reflectedElement=null!=t.reflectValueOn?t.reflectValueOn:this,this.inputName=t.inputName,this.value=t.value,this.selected=t.selected||!1,this.enabled=t.enabled||!0}toggle(){this.selected=!this.selected}get value(){return this._value}set value(t){this._value=t,this.reflectedElement&&(this.reflectedElement.innerText=this.stringValue),this.inputElement&&(this.inputElement.value=this.stringValue)}get stringValue(){return c(this.value)}get selected(){return this._selected}set selected(t){t!=this.selected&&(this._selected=t,this.toggleClass(this.selectedClasses,t),this.onSelected(t))}set enabled(t){!t&&this.selected&&(this.selected=!1),this.transitions.enabled=t,this.setStyle("visibility",t?"":"hidden"),this.onEnabled(t)}get inputName(){return this.inputElement?.name||null}set inputName(t){t&&(this.inputElement?this.inputElement.name=t:this.inputElement=M({type:"hidden",name:t,parent:this,value:this.stringValue}))}},k([e()],t.TurboSelectEntry.prototype,"enabled",null),t.TurboSelectEntry=bt=k([a("turbo-select-entry")],t.TurboSelectEntry);class Mt extends rt{toggledEntry;values;constructor(e,n,i=t.ClickMode.left,s){super(null,i,null,Z.selectInput,s),this.toggledEntry=e,this.values=n}}function xt(t,e,n=0){return t<n&&(t=n),t>e&&(t=e),t}t.TurboSelect=class extends z{static{Et=this}entries=[];entriesParent;enabled;inputName;multiSelection=!1;forceSelection=!1;selectedEntryClasses;static config={};constructor(t){super(t),t.unsetDefaultClasses||this.addClass(Et.config.defaultClasses),t.selectedValues||(t.selectedValues=[]),this.entriesParent=t.entriesParent??this,this.multiSelection=t.multiSelection??!1,this.forceSelection=t.forceSelection??!this.multiSelection,this.inputName=t.inputName,this.selectedEntryClasses=t.customSelectedEntryClasses||Et.config.defaultSelectedEntryClasses,(t.values??[]).forEach((e=>{e=this.addEntry(e),t.selectedValues?.includes(e.value)&&this.select(e)}))}addEntry(e){return e instanceof t.TurboSelectEntry||("object"==typeof e&&"value"in e?(e.inputName||(e.inputName=this.inputName),e=Tt(e)):e=Tt({value:e,inputName:this.inputName})),e.selectedClasses||(e.selectedClasses=this.selectedEntryClasses),e.addEventListener(Q.click,(t=>this.onEntryClick(e,t))),this.entriesParent.addChild(e),this.entries.push(e),e}onEntryClick(t,e){this.select(t)}select(e){if(!(e instanceof t.TurboSelectEntry)){let t=this.enabledEntries.find((t=>t.value==e));if(!t)return this;e=t}return this.multiSelection||this.selectedEntries.forEach((t=>{e!=t&&t.toggle()})),!e.selected&&this.forceSelection&&0==this.selectedEntries.length&&e.toggle(),this.dispatchEvent(new Mt(e,this.selectedValues)),this}selectByIndex(t,e=xt){return t=e(t,this.entries.length-1,0),this.select(this.entries[t])}deselectAll(){this.selectedEntries.forEach((t=>t.toggle()))}reset(){this.deselectAll(),this.onEntryClick(this.enabledEntries[0])}get enabledEntries(){return this.entries.filter((t=>t.enabled))}get enabledValues(){return this.enabledEntries.map((t=>t.value))}find(t){return this.entries.find((e=>e.value==t))}findAll(...t){return this.entries.filter((e=>t.includes(e.value)))}enable(e,...n){n.forEach((n=>{n instanceof t.TurboSelectEntry?n.enabled=e:this.find(n).enabled=e}))}get selectedEntries(){return this.entries.filter((t=>t.selected))}get selectedEntry(){return this.entries.find((t=>t.selected))}get selectedValues(){return this.selectedEntries.map((t=>t.value))}get selectedValue(){return this.selectedEntry.value}get stringSelectedValue(){return this.selectedEntries.map((t=>t.stringValue)).join(", ")}get values(){return this.entries.map((t=>t.value))}set values(t){const e=[];this.entries.forEach(((n,i)=>{n.selected&&i<t.length&&e.push(i)}));for(const t of this.entries)t.remove();this.entries.splice(0,this.entries.length);for(const e of t)this.addEntry(e);for(const t of e)this.select(this.entries[t])}},t.TurboSelect=Et=k([a("turbo-select")],t.TurboSelect);var wt;mt("turbo-dropdown{display:inline-block;position:relative}turbo-dropdown>turbo-popup{background-color:#fff;border:.1em solid #5e5e5e;border-radius:.4em;display:flex;flex-direction:column;overflow:hidden}turbo-dropdown>turbo-popup>turbo-select-entry{padding:.5em}turbo-dropdown>turbo-popup>turbo-select-entry:not(:last-child){border-bottom:.1em solid #bdbdbd}"),t.TurboDropdown=class extends t.TurboSelect{static{wt=this}selector;popup;popupOpen=!1;static config={defaultEntryTag:"h4",defaultSelectorTag:"h4"};constructor(t){t.entriesParent=t.popup||St(),super(t),this.selector=t.selector instanceof HTMLElement?t.selector:vt({buttonText:"",customTextTag:t.customSelectorTag||wt.config.defaultSelectorTag}),this.popup=t.entriesParent,this.initPopup(t),this.initSelector(t),document.addEventListener(Q.click,(t=>{this.popupOpen&&!this.contains(t.target)&&this.openPopup(!1)}))}initSelector(e){this.selector instanceof t.TurboButton&&(this.selector.buttonText="string"==typeof e.selector?e.selector:"string"==typeof e.values[0]?e.values[0]:e.values[0].value),this.selector.addListener(Q.click,(t=>{this.openPopup(!this.popupOpen),t.stopImmediatePropagation()})),this.addChild(this.selector),this.selector.addClass(e.customSelectorClasses?e.customSelectorClasses:wt.config.defaultSelectorClasses)}initPopup(t){this.addChild(this.popup),this.popup.show(!1),this.popup.addClass(t.customPopupClasses?t.customPopupClasses:wt.config.defaultPopupClasses)}onEntryClick(t){super.onEntryClick(t),this.openPopup(!1)}select(e){return super.select(e),this.selector instanceof t.TurboButton&&(this.selector.buttonText=this.selectedValue),this}openPopup(t){this.popupOpen!=t&&(this.popupOpen=t,this.popup,this.popup.show(t))}},t.TurboDropdown=wt=k([a("turbo-dropdown")],t.TurboDropdown);function Pt(t,e,n,i,s,r=!0){if(r){const i=Math.max(e,n),s=Math.min(e,n);t>i&&(t=i),t<s&&(t=s)}return i+(t-e)*(s-i)/(n-e)}function Ct(t){if(!t)return NaN;const e=parseInt(t.substring(1),16);return.2126*((e>>16&255)/255)+.7152*((e>>8&255)/255)+.0722*((e>>0&255)/255)}function kt(t,e){if(!t||!e)return NaN;const n=Ct(t),i=Ct(e);return(Math.max(n,i)+.1)/(Math.min(n,i)+.1)}function Dt(t,...e){let n="";return t.forEach(((t,i)=>{n+=t+(e[i]||"")})),n}mt("turbo-dropdown-entry{padding:.5em .7em;width:100%}turbo-dropdown-entry:hover{background-color:#d7d7d7}turbo-dropdown-entry:not(:last-child){border-bottom:.1em solid #bdbdbd}"),t.TurboDropdownEntry=class extends t.TurboSelectEntry{constructor(t){super(t)}},t.TurboDropdownEntry=k([a("turbo-dropdown-entry")],t.TurboDropdownEntry),t.MarkingMenu=class extends t.TurboSelect{transition;semiMajor;semiMinor;currentOrigin;minDragDistance;set startAngle(t){}set endAngle(t){}constructor(e={}){super({...e}),super.show(!1),this.startAngle=0,this.endAngle=e.endAngle??2*Math.PI,this.semiMajor=e.semiMajor??50,this.semiMinor=e.semiMinor??45,this.minDragDistance=e.minDragDistance??20,this.transition=e.transition instanceof _?e.transition:this.initializeTransition(e.transition??{}),this.transition.initialize(t.InOut.out,this.entries),this.setStyles({position:"fixed",top:0,left:0}),this.showTransition=this.showTransition.clone(),this.showTransition.delay={out:(t,e)=>.13+.02*e,in:0},this.initEvents()}get totalAngle(){let t=this.endAngle-this.startAngle;for(;t>2*Math.PI;)t-=2*Math.PI;return t}initEvents(){const t=()=>{this.isShown&&this.show(!1)};document.addEventListener(Q.scroll,t),document.addEventListener(Q.dragStart,t)}initializeTransition(t){return t.properties||(t.properties="opacity transform"),null==t.duration&&(t.duration=.1),t.timingFunction||(t.timingFunction={in:"ease-out",out:"ease-in"}),t.delay||(t.delay={in:t=>.01+.02*t,out:(t,e)=>.01+.02*(e-t)}),t.defaultStyles||(t.defaultStyles={in:(t,e)=>{const n=this.computeAngle(t,e),i=this.semiMajor*Math.cos(n),s=this.semiMinor*Math.sin(n);return{opacity:1,top:s+"px",left:i+"px",transform:`translate3d(${-50*(1-i/this.semiMajor)}%, ${-50*(1-s/this.semiMinor)}%, 0)`}},out:{opacity:0,transform:"translate3d(-50%, -50%, 0)"}}),V(t)}computeAngle(t,e){const n=e-(this.totalAngle<2*Math.PI?1:0);let i=this.totalAngle*t/n+this.startAngle;for(i+=.2*Math.sin(2*(i+Math.PI/2));i<0;)i+=2*Math.PI;for(;i>=2*Math.PI;)i-=2*Math.PI;return i}addEntry(e){return e=super.addEntry(e),this.transition?.initialize(this.isShown?t.InOut.in:t.InOut.out,e,!0),e.setStyles({position:"absolute"}),e}show(e=!this.isShown,n){return this.currentOrigin=n||new ot(this.offsetLeft,this.offsetTop),n&&e&&this.setStyle("transform",`translate3d(${n.x}px, ${n.y}px, 0)`),this.transition.apply(e?t.InOut.in:t.InOut.out,this.enabledEntries),super.show(e),this}getEntryInDirection(t){if(!this.currentOrigin)return null;if(ot.dist(t,this.currentOrigin)<this.minDragDistance)return null;let e=Math.atan2(t.y-this.currentOrigin.y,t.x-this.currentOrigin.x);e<0&&(e+=2*Math.PI);let n=null,i=1/0;return this.enabledEntries.forEach(((t,s)=>{const r=this.computeAngle(s,this.enabledEntries.length),o=Math.abs(r-e);o<i&&(i=o,n=t)})),n}},k([e({callBefore:t=>t-Math.PI/2})],t.MarkingMenu.prototype,"startAngle",null),k([e({callBefore:t=>t-Math.PI/2})],t.MarkingMenu.prototype,"endAngle",null),t.MarkingMenu=k([a("turbo-marking-menu")],t.MarkingMenu),t.TurboSelectWheel=class extends t.TurboSelect{transition;sizePerEntry=[];direction;opacity;scale;size;dragging;openTimeout;constructor(e){e.multiSelection=!1,e.forceSelection=!0,super(e),this.opacity=e.opacity??{max:1,min:0},this.scale=e.scale??{max:1,min:.5},this.size="object"==typeof e.size?e.size:{max:e.size??100,min:-(e.size??100)},this.direction=e.direction||t.Direction.horizontal,this.transition=e.transition instanceof _?e.transition:this.initializeTransition(e.transition??{}),this.setStyles({display:"block",position:"relative",margin:"100px"}),this.index=0,this.open=!1,this.initEvents(),requestAnimationFrame((()=>{this.transition.apply(t.InOut.out,this.entries),this.snapTo(0)}))}initializeTransition(t){return t.properties||(t.properties="opacity transform"),null==t.duration&&(t.duration=.2),t.timingFunction||(t.timingFunction="ease-in-out"),V(t)}reloadStyles(e=!1){const n=this.transition.getEnabledEntriesData();e&&n.forEach((e=>{const n=e.element[this.direction==t.Direction.vertical?"offsetHeight":"offsetWidth"];this.sizePerEntry[e.elementIndex]?this.sizePerEntry[e.elementIndex]=n:this.sizePerEntry.push(n)}));const i=this.sizePerEntry[0],s=i/2,r=this.sizePerEntry[n.length-1],o=r/2;let l=Math.floor(this.index),a=-Math.abs(this.index-l)*this.sizePerEntry[this.flooredTrimmedIndex],c=a;for(;l>=n.length;)c-=i,l--;for(;l<0;)a+=r,l++;c<this.size.min+s&&(c=this.size.min+s),a>this.size.max+o&&(a=this.size.max+o),this.applyStyling(n[l].element,l==n.length-1?c:a,s,o);for(let t=l-1;t>=0;t--)c-=this.sizePerEntry[t],c<this.size.min+s&&(c=this.size.min+s),this.applyStyling(n[t].element,c,s,o);for(let t=l+1;t<n.length;t++)a+=this.sizePerEntry[t],a>this.size.max+o&&(a=this.size.max+o),this.applyStyling(n[t].element,a,s,o)}applyStyling(e,n,i=this.sizePerEntry[0]/2,s=this.sizePerEntry[this.sizePerEntry.length-1]/2){let r,o;n>0?(r=Pt(n,0,this.size.max+s,this.opacity.max,this.opacity.min),o=Pt(n,0,this.size.max+s,this.scale.max,this.scale.min)):(r=Math.abs(Pt(n,0,this.size.min+i,this.opacity.max,this.opacity.min)),o=Math.abs(Pt(n,0,this.size.min+i,this.scale.max,this.scale.min))),e.setStyles({opacity:r,transform:`translate3d(\n                        calc(${this.direction==t.Direction.horizontal?n:0}px - 50%), \n                        calc(${this.direction==t.Direction.vertical?n:0}px - 50%),\n                        0) scale3d(${o}, ${o}, 1)`})}set index(t){this.selectByIndex(this.trimmedIndex)}get trimmedIndex(){return xt(Math.round(this.index),this.entries.length-1)}get flooredTrimmedIndex(){return xt(Math.floor(this.index),this.entries.length-1)}set open(t){this.setStyle("overflow",t?"visible":"hidden")}onEntryClick(t,e){super.onEntryClick(t,e),e.stopImmediatePropagation(),this.open=!0,this.snapTo(this.entries.indexOf(t)),this.setOpenTimeout()}addEntry(e){return(e=super.addEntry(e)).setStyles({position:"absolute",left:"50%",top:"50%"}),e.addEventListener(Q.dragStart,(e=>{e.stopImmediatePropagation(),this.clearOpenTimeout(),this.open=!0,this.dragging=!0,this.transition.enabled=t.TransitionMode.stylesOnly,this.reloadStyles(!0)})),this.transition&&(this.transition.attach(e),this.transition.apply(),this.reloadStyles(!0)),e}reset(){this.snapTo(0)}snapTo(e){this.index=e,this.transition.enabled=t.TransitionMode.enabled,this.reloadStyles(!0);const n=getComputedStyle(this.selectedEntry);this.setStyles({minWidth:n.width,minHeight:n.height},!0)}clearOpenTimeout(){this.openTimeout&&clearTimeout(this.openTimeout)}setOpenTimeout(){this.clearOpenTimeout(),this.openTimeout=setTimeout((()=>this.open=!1),3e3)}initEvents(){const e=this.direction==t.Direction.vertical?"y":"x";document.addEventListener(Q.drag,(t=>{this.dragging&&(t.stopImmediatePropagation(),this.index-=t.scaledDeltaPosition[e]/this.sizePerEntry[this.flooredTrimmedIndex],this.reloadStyles())})),document.addEventListener(Q.dragEnd,(t=>{this.dragging&&(t.stopImmediatePropagation(),this.dragging=!1,this.snapTo(this.trimmedIndex),this.setOpenTimeout())})),document.addEventListener(Q.click,(()=>this.open=!1))}},k([e()],t.TurboSelectWheel.prototype,"index",null),k([e()],t.TurboSelectWheel.prototype,"open",null),t.TurboSelectWheel=k([a("turbo-select-wheel")],t.TurboSelectWheel);const It={900:{Black:"normal",BlackItalic:"italic"},800:{ExtraBold:"normal",ExtraBoldItalic:"italic"},700:{Bold:"normal",BoldItalic:"italic"},600:{SemiBold:"normal",SemiBoldItalic:"italic"},500:{Medium:"normal",MediumItalic:"italic"},400:{Regular:"normal",Italic:"italic"},300:{Light:"normal",LightItalic:"italic"},200:{ExtraLight:"normal",ExtraLightItalic:"italic"},100:{Thin:"normal",ThinItalic:"italic"}};function Lt(t,e,n,i,s){return Dt`
        @font-face {
            font-family: "${t}";
            src: local("${t}"), url("${e}") format("${n}");
            font-weight: "${i}";
            font-style: "${s}";
        }`}return t.DefaultEventName=Q,t.Delegate=K,t.MathMLNamespace=g,t.MathMLTagsDefinitions=b,t.Point=ot,t.SvgNamespace=f,t.SvgTagsDefinitions=y,t.Transition=_,t.TransitionHandler=G,t.TurboClickEventName=q,t.TurboDragEvent=lt,t.TurboDragEventName=Y,t.TurboElement=z,t.TurboEvent=rt,t.TurboEventManager=class{_inputDevice=t.InputDevice.unknown;onInputDeviceChange;defaultState={};lockState={};disabledEventTypes={};currentKeys=[];currentAction=t.ActionMode.none;currentClick=t.ClickMode.none;wasRecentlyTrackpad=!1;origins;previousPositions;timerMap;moveThreshold;longPressDuration;constructor(t={}){this.onInputDeviceChange=new K,this.defaultState={enabled:t.enabled??!0,preventDefaultWheel:t.preventDefaultWheel??!0,preventDefaultMouse:t.preventDefaultMouse??!0,preventDefaultTouch:t.preventDefaultTouch??!0},this.resetLockState(),this.disabledEventTypes={...t},this.moveThreshold=t.moveThreshold||10,this.longPressDuration=t.longPressDuration||500,this.origins=new ht,this.previousPositions=new ht,this.timerMap=new ht;for(let t in Z)Q[t]=Z[t];this.initEvents(),ut(this)}initEvents(){try{this.disabledEventTypes.disableKeyEvents||(document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp),this.applyEventNames(U)),this.disabledEventTypes.disableWheelEvents||(document.addEventListener("wheel",this.wheel,{passive:!1}),this.applyEventNames(J)),this.disabledEventTypes.disableMoveEvent||this.applyEventNames(X),this.disabledEventTypes.disableMouseEvents||(document.addEventListener("mousedown",this.pointerDown),document.addEventListener("mousemove",this.pointerMove),document.addEventListener("mouseup",this.pointerUp),document.addEventListener("mouseleave",this.pointerLeave)),this.disabledEventTypes.disableTouchEvents||(document.addEventListener("touchstart",this.pointerDown,{passive:!1}),document.addEventListener("touchmove",this.pointerMove,{passive:!1}),document.addEventListener("touchend",this.pointerUp,{passive:!1}),document.addEventListener("touchcancel",this.pointerUp,{passive:!1})),this.disabledEventTypes.disableMouseEvents&&this.disabledEventTypes.disableTouchEvents||(this.disabledEventTypes.disableClickEvents||this.applyEventNames(q),this.disabledEventTypes.disableDragEvents||this.applyEventNames(Y))}catch(t){console.error("Error initializing events: ",t)}}destroy(){document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp),document.removeEventListener("wheel",this.wheel),document.removeEventListener("mousedown",this.pointerDown),document.removeEventListener("mousemove",this.pointerMove),document.removeEventListener("mouseup",this.pointerUp),document.removeEventListener("mouseleave",this.pointerLeave),document.removeEventListener("touchstart",this.pointerDown),document.removeEventListener("touchmove",this.pointerMove),document.removeEventListener("touchend",this.pointerUp),document.removeEventListener("touchcancel",this.pointerUp)}get inputDevice(){return this._inputDevice}set inputDevice(e){this.inputDevice!=e&&(e==t.InputDevice.trackpad&&(this.wasRecentlyTrackpad=!0),this._inputDevice=e,this.onInputDeviceChange.fire(e))}setLockState(t,e){this.lockState.lockOrigin=t;for(const t in e)this.lockState[t]=e[t]}resetLockState(){this.lockState.enabled=this.defaultState.enabled,this.lockState.preventDefaultWheel=this.defaultState.preventDefaultWheel,this.lockState.preventDefaultMouse=this.defaultState.preventDefaultMouse,this.lockState.preventDefaultTouch=this.defaultState.preventDefaultTouch,this.lockState.lockOrigin=document.body}get enabled(){return this.defaultState.enabled&&this.lockState.enabled}get preventDefaultWheel(){return this.defaultState.preventDefaultWheel&&this.lockState.preventDefaultWheel}get preventDefaultMouse(){return this.defaultState.preventDefaultMouse&&this.lockState.preventDefaultMouse}get preventDefaultTouch(){return this.defaultState.preventDefaultTouch&&this.lockState.preventDefaultTouch}keyDown=t=>{this.enabled&&(this.currentKeys.includes(t.key)||(this.currentKeys.push(t.key),document.dispatchEvent(new at(t.key,null,this.currentClick,this.currentKeys,Z.keyPressed))))};keyUp=t=>{this.enabled&&this.currentKeys.includes(t.key)&&(this.currentKeys.splice(this.currentKeys.indexOf(t.key),1),document.dispatchEvent(new at(null,t.key,this.currentClick,this.currentKeys,Z.keyReleased)))};wheel=e=>{if(!this.enabled)return;let n;this.preventDefaultWheel&&e.preventDefault(),(Math.abs(e.deltaY)<=40||0!=e.deltaX)&&(this.inputDevice=t.InputDevice.trackpad),this.wasRecentlyTrackpad||(this.inputDevice=t.InputDevice.mouse),this.clearTimer("recentlyTrackpadTimer"),this.setTimer("recentlyTrackpadTimer",(()=>{this.inputDevice==t.InputDevice.trackpad&&(this.wasRecentlyTrackpad=!1)}),800),n=this.inputDevice==t.InputDevice.trackpad&&e.ctrlKey?Z.trackpadPinch:this.inputDevice==t.InputDevice.trackpad?Z.trackpadScroll:Z.mouseWheel,document.dispatchEvent(new ct(new ot(e.deltaX,e.deltaY),this.currentKeys,n))};pointerDown=e=>{if(e.composedPath().includes(this.lockState.lockOrigin)||this.resetLockState(),!this.enabled)return;const n=e instanceof TouchEvent;if(this.preventDefaultMouse&&!n&&e.preventDefault(),this.preventDefaultTouch&&n&&e.preventDefault(),n?this.inputDevice=t.InputDevice.touch:this.inputDevice!=t.InputDevice.unknown&&this.inputDevice!=t.InputDevice.touch||(this.inputDevice=t.InputDevice.mouse),n)Array.from(e.changedTouches).forEach((t=>{const e=new ot(t);this.origins.set(t.identifier,e),this.previousPositions.set(t.identifier,e)})),this.setClickMode(e.touches.length,!0);else{const t=new ot(e);this.origins.set(0,t),this.previousPositions.set(0,t),this.setClickMode(e.button)}this.disabledEventTypes.disableClickEvents||(this.fireClick(this.origins.first,Z.clickStart),this.currentAction=t.ActionMode.click,this.setTimer(Z.longPress,(()=>{this.currentAction==t.ActionMode.click&&(this.currentAction=t.ActionMode.longPress,this.fireClick(this.origins.first,Z.longPress))}),this.longPressDuration))};pointerMove=e=>{if(!this.enabled)return;if(this.disabledEventTypes.disableMoveEvent&&this.disabledEventTypes.disableDragEvents)return;const n=e instanceof TouchEvent;this.preventDefaultMouse&&!n&&e.preventDefault(),this.preventDefaultTouch&&n&&e.preventDefault();const i=new ht;if(n?Array.from(e.touches).forEach((t=>i.set(t.identifier,new ot(t)))):i.set(0,new ot(e.clientX,e.clientY)),this.disabledEventTypes.disableMoveEvent||this.fireDrag(i,Z.move),this.currentAction!=t.ActionMode.none&&!this.disabledEventTypes.disableDragEvents){if(this.currentAction!=t.ActionMode.drag){if(!Array.from(this.origins.entries()).some((([t,e])=>{const n=i.get(t);return n&&ot.dist(n,e)>this.moveThreshold})))return;l(this),this.fireDrag(this.origins,Z.dragStart),this.currentAction=t.ActionMode.drag}this.fireDrag(i)}i.forEach(((t,e)=>this.previousPositions.set(e,t)))};pointerUp=e=>{if(!this.enabled)return;const n=e instanceof TouchEvent;this.preventDefaultMouse&&!n&&e.preventDefault(),this.preventDefaultTouch&&n&&e.preventDefault(),this.clearTimer(Z.longPress);const i=new ht;n?Array.from(e.changedTouches).forEach((t=>{i.set(t.identifier,new ot(t))})):i.set(0,new ot(e)),this.currentAction!=t.ActionMode.drag||this.disabledEventTypes.disableDragEvents||this.fireDrag(i,Z.dragEnd),this.disabledEventTypes.disableClickEvents||(this.currentAction==t.ActionMode.click&&this.fireClick(i.first,Z.click),this.fireClick(this.origins.first,Z.clickEnd)),n?Array.from(e.changedTouches).forEach((t=>{this.origins.delete(t.identifier),this.previousPositions.delete(t.identifier)})):(this.origins.clear(),this.previousPositions.clear()),this.currentAction=t.ActionMode.none,this.currentClick=t.ClickMode.none};pointerLeave=()=>{this.enabled&&this.currentAction!=t.ActionMode.none&&(this.clearTimer(Z.longPress),this.currentAction!=t.ActionMode.drag&&(this.fireClick(this.origins.first,Z.clickEnd),this.currentAction=t.ActionMode.none))};getFireOrigin(t){const e=this.origins.first?this.origins.first:t.first;return document.elementFromPoint(e.x,e.y)||document}fireClick(t,e=Z.click){if(!t)return;(document.elementFromPoint(t.x,t.y)||document).dispatchEvent(new rt(t,this.currentClick,this.currentKeys,e))}fireDrag(t,e=Z.drag){t&&this.getFireOrigin(t).dispatchEvent(new lt(this.origins,this.previousPositions,t,this.currentClick,this.currentKeys,e))}setTimer(t,e,n){this.clearTimer(t),this.timerMap.set(t,setTimeout((()=>{e(),this.clearTimer(t)}),n))}clearTimer(t){const e=this.timerMap.get(t);e&&(clearTimeout(e),this.timerMap.delete(t))}setClickMode(e,n=!1){switch(n&&e--,e){case-1:return void(this.currentClick=t.ClickMode.none);case 0:return void(this.currentClick=t.ClickMode.left);case 1:return void(this.currentClick=t.ClickMode.middle);case 2:return void(this.currentClick=t.ClickMode.right);default:return void(this.currentClick=t.ClickMode.other)}}applyEventNames(t){for(const e in t)Q[e]=t[e]}},t.TurboEventName=Z,t.TurboKeyEvent=at,t.TurboKeyEventName=U,t.TurboMap=ht,t.TurboMoveName=X,t.TurboSelectInputEvent=Mt,t.TurboWheelEvent=ct,t.TurboWheelEventName=J,t.a=function(t={}){return S({...t,tag:"a"})},t.addChildManipulationToElementPrototype=R,t.addClassManipulationToElementPrototype=B,t.addElementManipulationToElementPrototype=$,t.addListenerManipulationToElementPrototype=W,t.addStylesManipulationToElementPrototype=H,t.areEqual=function(...t){if(t.length<2)return!0;for(let e=0;e<t.length-1;e++)if(t[e]!=t[e+1])return!1;return!0},t.auto=e,t.bestOverlayColor=function(t,e="#000000",n="#FFFFFF"){return kt(t,n)>kt(e,t)?n:e},t.blindElement=function(t={}){let e;return e=E(t.tag)?document.createElementNS(f,t.tag||"svg"):v(t.tag)?document.createElementNS(g,t.tag||"math"):document.createElement(t.tag||"div"),t.shadowDOM&&e.attachShadow({mode:"open"}),e.setProperties(t),e},t.button=vt,t.cache=s,t.callOnce=n,t.callOncePerInstance=i,t.camelToKebabCase=d,t.canvas=function(t={}){return S({...t,tag:"canvas"})},t.clearCache=l,t.clearCacheEntry=function(t,e){const n="function"==typeof e?e.name:e,i=Object.getOwnPropertySymbols(t).find((t=>t.toString()===`Symbol(__cache__${n})`));i&&t[i]&&delete t[i]},t.contrast=kt,t.css=Dt,t.define=a,t.div=function(t={}){return S({...t,tag:"div"})},t.dropdown=function(e){return new t.TurboDropdown(e)},t.dropdownEntry=function(e){return new t.TurboDropdownEntry(e)},t.eachEqualToAny=N,t.element=S,t.fetchSvg=pt,t.flexCol=w,t.flexColCenter=function(t){const e=w(t);return e.setStyles({justifyContent:"center",alignItems:"center"},!0),e},t.flexRow=P,t.flexRowCenter=function(t){const e=P(t);return e.setStyles({justifyContent:"center",alignItems:"center"},!0),e},t.form=function(t={}){return S({...t,tag:"form"})},t.generateTagFunction=function(t){return(e={})=>(e.tag=t,S({...e,tag:t}))},t.getFileExtension=h,t.h1=function(t={}){return S({...t,tag:"h1"})},t.h2=function(t={}){return S({...t,tag:"h2"})},t.h3=function(t={}){return S({...t,tag:"h3"})},t.h4=function(t={}){return S({...t,tag:"h4"})},t.h5=function(t={}){return S({...t,tag:"h5"})},t.h6=function(t={}){return S({...t,tag:"h6"})},t.icon=function(e){return new t.TurboIcon(e)},t.iconToggle=function(e){return new t.TurboIconToggle(e)},t.img=T,t.input=M,t.isMathMLTag=v,t.isNull=F,t.isSvgTag=E,t.isUndefined=function(t){return void 0===t},t.kebabToCamelCase=p,t.linearInterpolation=Pt,t.link=function(t={}){return S({...t,tag:"link"})},t.loadLocalFont=function(t){t.name&&t.pathOrDirectory||console.error("Please specify font name and path/directory");const e=0==h(t.pathOrDirectory).length;t.stylesPerWeights||(t.stylesPerWeights=e?It:{normal:"normal"}),t.format||(t.format="woff2"),t.extension||(t.extension=".ttf"),"."!=t.extension[0]&&(t.extension="."+t.extension),C(Object.entries(t.stylesPerWeights).map((([e,n])=>"string"==typeof n?Lt(t.name,t.pathOrDirectory,t.format,e,n):Object.entries(n).map((([n,i])=>Lt(t.name,`${t.pathOrDirectory}/${t.name}-${n}${t.extension}`,t.format,e,i))).join("\n"))).join("\n"))},t.luminance=Ct,t.mod=function(t,e=0){for(;t<0;)t-=e;for(;t>=e;)t+=e;return t},t.numericalInput=function(e={}){return new t.TurboNumericalInput(e)},t.observe=m,t.p=function(t={}){return S({...t,tag:"p"})},t.parse=u,t.popup=St,t.select=function(e){return new t.TurboSelect(e)},t.selectEntry=Tt,t.selectWheel=function(e){return new t.TurboSelectWheel(e)},t.setupTurboEventManagerBypassing=ut,t.spacer=function(t){const e=S(t);return e.setStyle("flexGrow",1,!0),e},t.span=function(t={}){return S({...t,tag:"span"})},t.stringify=c,t.style=x,t.stylesheet=C,t.textToElement=dt,t.textarea=function(t={}){return S({...t,tag:"textarea"})},t.transition=V,t.trim=xt,t.turboInput=function(e={}){return new t.TurboInput(e)},t.turbofy=function(){B(),R(),W(),$(),H(),j()},t.updateChainingPropertiesInElementPrototype=j,t.video=function(t={}){return S({...t,tag:"video"})},t}({});
